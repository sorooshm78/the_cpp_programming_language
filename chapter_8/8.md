## Introduction
ฺฉูุฏ ุงุณุชูุงุฏู ูุคุซุฑ ุงุฒ ++C ุชุนุฑู ู ุจูโฺฉุงุฑฺฏุฑ **ููุนโูุง ุชุนุฑูโุดุฏู ุชูุณุท ฺฉุงุฑุจุฑ** ุงุณุช.
ุงู ูุตู ุณู ฺฏูููโ ุงุจุชุฏุงู ุงู ููููู ุฑุง ูุนุฑู ูโฺฉูุฏ:

* **struct** (ุณุงุฎุชุงุฑ): ุฏูุจุงููโุง ุงุฒ ุนูุงุตุฑ (ฺฉู *ุนุถู* ูุงูุฏู ูโุดููุฏ) ุจุง ููุนโูุง ุฏูุฎูุงู.
* **union**: ุณุงุฎุชุงุฑ ฺฉู ุฏุฑ ูุฑ ูุญุธู ููุท ููุฏุงุฑ ฺฉ ุงุฒ ุงุนุถุงุด ุฑุง ูฺฏู ูโุฏุงุฑุฏ.
* **enum** (ุดูุงุฑุด): ููุน ฺฉู ูุฌููุนูโุง ุงุฒ ุซุงุจุชโูุง ูุงูโฺฏุฐุงุฑโุดุฏู (*enumerator*) ุฑุง ุชุนุฑู ูโฺฉูุฏ.
* **enum class** (ุดูุงุฑุด ุจุง ูุญุฏูุฏู ุง Scoped Enumeration): ููุน ุดูุงุฑุด ฺฉู ุงุนุถุง ุดูุงุฑุดโุดุฏู ุฏุฑ ูุญุฏูุฏูโ ุฎูุฏ ุขู ุดูุงุฑุด ูุฑุงุฑ ุฏุงุฑูุฏ ู ูฺ ุชุจุฏู ุถูู ุจู ููุนโูุง ุฏฺฏุฑ ุงูุฌุงู ููโุดูุฏ.

ฺฏูููโูุง ูุฎุชูู ุงู ููุนโูุง ุณุงุฏู ุงุฒ ูุฎุณุชู ุฑูุฒูุง ูพุฏุงุด ++C ูุฌูุฏ ุฏุงุดุชูโุงูุฏ.
ุขูโูุง ุนูุฏุชุงู ุจุฑ ููุงุด ุฏุงุฏู ูุชูุฑฺฉุฒ ูุณุชูุฏ ู ุณุชูู ููุฑุงุช ุจุดุชุฑ ุจุฑูุงููโููุณ ุจู ุณุจฺฉ C ูุญุณูุจ ูโุดููุฏ.

ููููู **struct** ฺฉู ุงูุฌุง ุชูุถุญ ุฏุงุฏู ุดุฏูุ ุดฺฉู ุณุงุฏู ุงุฒ ฺฉ **ฺฉูุงุณ** ุงุณุช (ุจุฎุด 3.2ุ ูุตู 16).

## Structures
ุขุฑุงู ูุฌููุนูโุง ุงุฒ ุนูุงุตุฑ ุจุง ฺฉ ููุน ฺฉุณุงู ุงุณุช. ุฏุฑ ุณุงุฏูโุชุฑู ุญุงูุชุ ฺฉ **struct** (ุณุงุฎุชุงุฑ) ูุฌููุนูโุง ุงุฒ ุนูุงุตุฑ ุจุง ููุนโูุง ุฏูุฎูุงู ุงุณุช. ุจุฑุง ูุซุงู:

```cpp
struct Address {
    const char* name;   // "Jim Dandy"
    int number;         // 61
    const char* street; // "South St"
    const char* town;   // "New Providence"
    char state[2];      // 'N' 'J'
    const char* zip;    // "07974"
};
```

ุงู ุชุนุฑูุ ููุน ุจู ูุงู `Address` ุงุฌุงุฏ ูโฺฉูุฏ ฺฉู ุดุงูู ุงุทูุงุนุงุช ุงุณุช ฺฉู ุจุฑุง ุงุฑุณุงู ูุงูู ุจู ฺฉ ูุฑุฏ ุฏุฑ ุงุงูุงุช ูุชุญุฏู ุขูุฑฺฉุง ูุงุฒู ุงุณุช. ุจู ุนูุงูุช **;** ุงูุชูุง ุชุนุฑู ุฏูุช ฺฉูุฏ.

ูุชุบุฑูุง ููุน `Address` ุฏุฑุณุช ูุงููุฏ ุณุงุฑ ูุชุบุฑูุง ุชุนุฑู ูโุดููุฏ ู ุงุนุถุง ุขูโูุง ุฑุง ูโุชูุงู ุจุง ุนููฺฏุฑ **`.`** (ููุทู) ุฏุณุชุฑุณ ุฏุงุฏ. ุจุฑุง ูุซุงู:

```cpp
void f()
{
    Address jd;
    jd.name = "Jim Dandy";
    jd.number = 61;
}
```

ูุชุบุฑูุง ุณุงุฎุชุงุฑ ุฑุง ูโุชูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุฏุฏุงุดุช **`{}`** ููุฏุงุฑุฏู ุงููู ฺฉุฑุฏ (ยง6.3.5). ุจุฑุง ูุซุงู:

```cpp
Address jd = {
    "Jim Dandy",
    61, "South St",
    "New Providence",
    {'N','J'}, "07974"
};
```

ุฏูุช ฺฉูุฏ ฺฉู `jd.state` ุฑุง ููโุชูุงู ุจุง ุฑุดุชู `"NJ"` ููุฏุงุฑุฏู ฺฉุฑุฏ. ุฑุดุชูโูุง ุจุง ฺฉุงุฑุงฺฉุชุฑ ุตูุฑ `'\0'` ุฎุงุชูู ูโุงุจูุฏุ ุจูุงุจุฑุงู `"NJ"` ุดุงูู ุณู ฺฉุงุฑุงฺฉุชุฑ ุงุณุช โ ฺฉ ฺฉุงุฑุงฺฉุชุฑ ุจุดุชุฑ ุงุฒ ุขูฺู ุฏุฑ `jd.state` ุฌุง ูโุดูุฏ. ุฏุฑ ุงู ูุซุงูุ ุนูุฏุงู ุงุฒ ููุนโูุง ุณุทุญ ูพุงู ุจุฑุง ุงุนุถุง ุงุณุชูุงุฏู ุดุฏู ุชุง ูุดุงู ุฏุงุฏู ุดูุฏ ฺฉู ฺฺฏููู ุงู ฺฉุงุฑ ุงูุฌุงู ูโุดูุฏ ู ฺู ูุดฺฉูุงุช ูโุชูุงูุฏ ุงุฌุงุฏ ฺฉูุฏ.

ุณุงุฎุชุงุฑูุง ุงุบูุจ ุงุฒ ุทุฑู ุงุดุงุฑูโฺฏุฑูุง ุจุง ุนููฺฏุฑ **`->`** (ุฏุณุชุฑุณ ุงุฒ ุทุฑู ุงุดุงุฑูโฺฏุฑ ุจู struct) ุงุณุชูุงุฏู ูโุดููุฏ. ุจุฑุง ูุซุงู:

```cpp
void print_addr(Address* p)
{
    cout << p->name << '\n'
         << p->number << ' ' << p->street << '\n'
         << p->town << '\n'
         << p->state[0] << p->state[1] << ' ' << p->zip << '\n';
}
```

ููุช `p` ฺฉ ุงุดุงุฑูโฺฏุฑ ุงุณุชุ ุนุจุงุฑุช `p->m` ูุนุงุฏู `( *p ).m` ุงุณุช.

ุจูโุทูุฑ ุฌุงฺฏุฒูุ ฺฉ **struct** ูโุชูุงูุฏ ุจูโุตูุฑุช **ุงุฑุฌุงุน (reference)** ุจู ุชุงุจุน ุฏุงุฏู ุดูุฏ ู ุจุง ุนููฺฏุฑ **`.`** (ุฏุณุชุฑุณ ุจู ุนุถู ุณุงุฎุชุงุฑ) ุงุณุชูุงุฏู ุดูุฏ:

```cpp
void print_addr2(const Address& r)
{
    cout << r.name << '\n'
         << r.number << ' ' << r.street << '\n'
         << r.town << '\n'
         << r.state[0] << r.state[1] << ' ' << r.zip << '\n';
}
```

ุจุญุซ ุฏุฑุจุงุฑูโ ุงุฑุณุงู ุขุฑฺฏููุงูโูุง ุฏุฑ ุจุฎุด ยง12.2 ุขูุฏู ุงุณุช.

ุงุดุง ููุน ุณุงุฎุชุงุฑ ุฑุง ูโุชูุงู **ุงุฎุชุตุงุต (assign)** ุฏุงุฏุ ุจูโุนููุงู **ุขุฑฺฏููุงู ุจู ุชุงุจุน ุงุฑุณุงู** ฺฉุฑุฏ ู ุจูโุนููุงู **ูุชุฌู ุงุฒ ฺฉ ุชุงุจุน ุจุงุฒฺฏุฑุฏุงูุฏ**. ุจุฑุง ูุซุงู:

```cpp
Address current;

Address set_current(Address next)
{
    Address prev = current;
    current = next;
    return prev;
}
```

ุณุงุฑ ุนููุงุช ููฺฉูุ ูุงููุฏ ููุงุณู (`==` ู `!=`)ุ ุจูโุทูุฑ ูพุดโูุฑุถ ุฏุฑ ุฏุณุชุฑุณ ูุณุชูุฏ.
ุจุง ุงู ุญุงูุ ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ุงู ุนููฺฏุฑูุง ุฑุง ุชุนุฑู ฺฉูุฏ (ยง3.2.1.1ุ ูุตู 18).

## struct Layout
ฺฉ ุดุก ุงุฒ ููุน **struct** ุงุนุถุง ุฎูุฏ ุฑุง ุจู ุชุฑุชุจ ฺฉู ุงุนูุงู ุดุฏูโุงูุฏ ุฏุฑ ุญุงูุธู ูฺฏู ูโุฏุงุฑุฏ.
ุจุฑุง ูุซุงูุ ูโุชูุงูู ุฏุงุฏูโูุง ุณุงุฏูโ ฺฉ ุฏุณุชฺฏุงู ุงูุฏุงุฒูโฺฏุฑ ุฑุง ุฏุฑ ุณุงุฎุชุงุฑ ูุงููุฏ ุฒุฑ ุฐุฎุฑู ฺฉูู:

```cpp
struct Readout {
    char hour;  // [0:23]
    int value;
    char seq;   // ุนูุงูุช ุชุฑุชุจ ['a':'z']
};
```

ูโุชูุงูุฏ ุชุตูุฑ ฺฉูุฏ ฺฉู ุงุนุถุง ฺฉ ุดุก ุงุฒ ููุน `Readout` ุฏุฑ ุญุงูุธู ุจู ุงู ุตูุฑุช ฺุฏู ูโุดููุฏ:

```
hour:   value:   seq:
```

ุงุนุถุง ุฏููุงู ุจู ุชุฑุชุจ ฺฉู ุงุนูุงู ุดุฏูโุงูุฏ ุฏุฑ ุญุงูุธู ุชุฎุตุต ุฏุงุฏู ูโุดููุฏุ ุจูุงุจุฑุงู ุขุฏุฑุณ `hour` ุจุงุฏ ฺฉูฺฺฉโุชุฑ ุงุฒ ุขุฏุฑุณ `value` ุจุงุดุฏ (ูฺฏุงู ฺฉูุฏ ุจู ยง8.2.6).

---

ุจุง ุงู ุญุงูุ **ุงูุฏุงุฒูโ ฺฉ ุดุก ุงุฒ ููุน struct ุงูุฒุงูุงู ุจุฑุงุจุฑ ุจุง ูุฌููุน ุงูุฏุงุฒูโ ุงุนุถุง ุขู ูุณุช**.
ุฏููุด ุงู ุงุณุช ฺฉู ุจุณุงุฑ ุงุฒ ูุงุดูโูุง (ูพุฑุฏุงุฒูุฏูโูุง) ูุงุฒ ุฏุงุฑูุฏ ฺฉู ุงุดุง ูุฑุจูุท ุจู ุจุนุถ ุงููุงุน ุฏุงุฏูโูุง ุฑู ูุฑุฒูุง ุฎุงุต (ูุงุจุณุชู ุจู ูุนูุงุฑ) ูุฑุงุฑ ฺฏุฑูุฏ ุง ุฏุณุชโฺฉู ุฏุฑ ุงู ุญุงูุช ุฏุณุชุฑุณ ุจู ุขูโูุง ฺฉุงุฑุขูุฏุชุฑ ุงุณุช.
ุจุฑุง ูุซุงูุ ูุนูููุงู ุงุนุฏุงุฏ ุตุญุญ (`int`) ุฑู ูุฑุฒูุง ฺฉููู (word boundaries) ูุฑุงุฑ ุฏุงุฏู ูโุดููุฏ. ุฑู ฺูู ูุงุดูโูุงุ ฺฏูุชู ูโุดูุฏ ฺฉู ุงุดุง ุจุงุฏ ยซููโุชุฑุงุฒ (aligned)ยป ุจุงุดูุฏ (ยง6.2.9). ุงู ููุถูุน ุจุงุนุซ ุงุฌุงุฏ ยซุญูุฑูโูุงยป (ูุถุงูุง ุงุณุชูุงุฏูโูุดุฏู) ุฏุฑ ุณุงุฎุชุงุฑูุง ูโุดูุฏ.

ฺฉ ฺูุด ูุงูุนโุชุฑ ุงุฒ `Readout` ุฑู ูุงุดู ฺฉู `int` ุขู ด ุจุงุช ุงุณุชุ ฺูู ุฎูุงูุฏ ุจูุฏ:

```
hour:
value:
seq:
```

ุฏุฑ ุงู ุญุงูุชุ ููุงููุฏ ุจุณุงุฑ ุงุฒ ูุงุดูโูุงุ `sizeof(Readout)` ุจุฑุงุจุฑ **ฑฒ** ุงุณุชุ ูู **ถ** (ฺฉู ฺฉุณ ุดุงุฏ ุณุงุฏูโุงูฺฏุงุฑุงูู ุงุฒ ุฌูุน ุงูุฏุงุฒูโ ุงุนุถุง ุงูุชุธุงุฑ ุฏุงุดุชู ุจุงุดุฏ).

---

ูโุชูุงูุฏ ุจุง ูุฑุชุจโุณุงุฒ ุงุนุถุง ุจุฑ ุงุณุงุณ ุงูุฏุงุฒู (ุงุฒ ุจุฒุฑฺฏโุชุฑู ุจู ฺฉูฺฺฉโุชุฑู) ูุถุง ูุฏุฑุฑูุชู ุฑุง ฺฉุงูุด ุฏูุฏ.
ุจุฑุง ูุซุงู:

```cpp
struct Readout {
    int value;
    char hour;  // [0:23]
    char seq;   // ุนูุงูุช ุชุฑุชุจ ['a':'z']
};
```

ฺูุด ุฏุฑ ุงู ุญุงูุช:

```
value:
(hour, seq):
```

ุจุง ุงู ุญุงูุ ููฺูุงู ฺฉ ยซุญูุฑูยป ฒ ุจุงุช ุจุงู ูโูุงูุฏ ู `sizeof(Readout)` ุจุฑุงุจุฑ **ธ** ุฎูุงูุฏ ุดุฏ.
ุนูุชุด ุงู ุงุณุช ฺฉู ููฺฏุงู ูุฑุงุฑ ุฏุงุฏู ุฏู ุดุก ูพุดุช ุณุฑ ูู (ูุซูุงู ุฏุฑ ฺฉ ุขุฑุงู ุงุฒ `Readout`ูุง) ุจุงุฏ ููโุชุฑุงุฒ ุญูุธ ุดูุฏ.
ูพุณ ุงูุฏุงุฒูโ ฺฉ ุขุฑุงูโ ฑฐ ุนุถู ุงุฒ ููุน `Readout` ุจุฑุงุจุฑ ุงุณุช ุจุง:

```
10 * sizeof(Readout)
```

---

ุจู ุทูุฑ ฺฉูุ ุจูุชุฑ ุงุณุช ุงุนุถุง ุฑุง ุจุฑ ุงุณุงุณ **ุฎูุงูุง** ฺฉุฏ ูุฑุชุจ ฺฉูุฏ ู ููุท ุฏุฑ ุตูุฑุช ุจู ูุฑุชุจโุณุงุฒ ุจุฑ ุงุณุงุณ ุงูุฏุงุฒู ูฺฉุฑ ฺฉูุฏ ฺฉู ูุงูุนุงู ูุงุฒ ุจู ุจูููโุณุงุฒ ุซุงุจุช ุดุฏู ุจุงุดุฏ.

ุงุณุชูุงุฏู ุงุฒ ฺูุฏ **specifier ุฏุณุชุฑุณ** (ุนู `public`ุ `private` ุง `protected`) ูู ูโุชูุงูุฏ ุฑู ฺุฏูุงู ุญุงูุธู ุชุฃุซุฑ ุจฺฏุฐุงุฑุฏ (ยง20.5).

## struct Names
ูุงู ฺฉ ููุน (type) ุจูุงูุงุตูู ูพุณ ุงุฒ ุงูโฺฉู ุฏุฑ ฺฉุฏ ุฏุฏู ุดุฏ ูุงุจู ุงุณุชูุงุฏู ูโุดูุฏุ ูู ุงูโฺฉู ููุท ุจุนุฏ ุงุฒ ฺฉุงูู ุฏุฏู ุดุฏู ุงุนูุงู ุขู.
ุจุฑุง ูุซุงู:

```cpp
struct Link {
    Link* previous;
    Link* successor;
};
```

ุจุง ุงู ุญุงูุ ุงูฺฉุงู ุงุนูุงู ุงุดุง ุฌุฏุฏ ุงุฒ ฺฉ struct ุชุง ุฒูุงู ฺฉู ุงุนูุงู ฺฉุงูู ุขู struct ุฏุฏู ูุดูุฏ ูุฌูุฏ ูุฏุงุฑุฏ.
ุจุฑุง ูุซุงู:

```cpp
struct No_good {
    No_good member; // ุฎุทุง: ุชุนุฑู ุจุงุฒฺฏุดุช
};
```

ุงู ุฎุทุง ุงุณุช ฺูู ฺฉุงููพุงูุฑ ูุงุฏุฑ ุจู ุชุนู ุงูุฏุงุฒูโ `No_good` ูุณุช.
ุจุฑุง ุงูฺฉู ุฏู (ุง ุจุดุชุฑ) struct ุจุชูุงููุฏ ุจู ฺฉุฏฺฏุฑ ุงุดุงุฑู ฺฉููุฏุ ูโุชูุงูู ูุงู ุฑุง ุจู ุนููุงู ูุงู ฺฉ struct ูุนุฑู ฺฉูู.
ุจุฑุง ูุซุงู:

```cpp
struct List; // ุงุนูุงู ูุงู struct: List ุจุนุฏุงู ุชุนุฑู ุฎูุงูุฏ ุดุฏ
struct Link {
    Link* pre;
    Link* suc;
    List* member_of;
    int data;
};
struct List {
    Link* head;
};
```

ุจุฏูู ุงุนูุงู ุงูู ุจุฑุง `List`ุ ุงุณุชูุงุฏู ุงุฒ ููุน ุงุดุงุฑูโฺฏุฑ `List*` ุฏุฑ ุชุนุฑู `Link` ฺฉ ุฎุทุง ูุญู ุจูุฏ.

---

ูุงู ฺฉ struct ูโุชูุงูุฏ ูุจู ุงุฒ ุงูโฺฉู ููุน ุขู ุชุนุฑู ุดูุฏ ุงุณุชูุงุฏู ุดูุฏุ ุจู ุดุฑุท ฺฉู ุขู ุงุณุชูุงุฏู ูุงุฒ ุจู ุฏุงูุณุชู ูุงู ุงุนุถุง ุง ุงูุฏุงุฒูโ ุขู struct ูุฏุงุดุชู ุจุงุดุฏ.
ุจุง ุงู ุญุงูุ ุชุง ุชฺฉูู ุดุฏู ุงุนูุงู ฺฉ structุ ุขู struct ฺฉ **ููุน ูุงูุต (incomplete type)** ูุญุณูุจ ูโุดูุฏ.
ุจุฑุง ูุซุงู:

```cpp
struct S;   // "S" ูุงู ฺฉ ููุน ุงุณุช
extern S a;
S f();
void g(S);
S* h(S*);
```

ุงูุง ุจุณุงุฑ ุงุฒ ุงู ุงุนูุงูโูุง ุฑุง ููโุชูุงู ุงุณุชูุงุฏู ฺฉุฑุฏ ูฺฏุฑ ุงูฺฉู ููุน `S` ุชุนุฑู ุดุฏู ุจุงุดุฏ:

```cpp
void k(S* p)
{
    S a;       // ุฎุทุง: S ุชุนุฑู ูุดุฏูุ ุจุฑุง ุชุฎุตุต ุงูุฏุงุฒู ูุงุฒู ุงุณุช
    f();       // ุฎุทุง: S ุชุนุฑู ูุดุฏูุ ุจุฑุง ุจุงุฒฺฏุฑุฏุงูุฏู ููุฏุงุฑ ุงูุฏุงุฒู ูุงุฒู ุงุณุช
    g(a);      // ุฎุทุง: S ุชุนุฑู ูุดุฏูุ ุจุฑุง ุงุฑุณุงู ุขุฑฺฏููุงู ุงูุฏุงุฒู ูุงุฒู ุงุณุช
    p->m = 7;  // ุฎุทุง: S ุชุนุฑู ูุดุฏูุ ูุงู ุนุถู ุดูุงุฎุชู ูุณุช
    S* q = h(p); // ุฏุฑุณุช: ุงุดุงุฑูโฺฏุฑูุง ูโุชูุงููุฏ ุชุฎุตุต ุฏุงุฏู ู ุงุฑุณุงู ุดููุฏ
    q->m = 7;    // ุฎุทุง: S ุชุนุฑู ูุดุฏูุ ูุงู ุนุถู ุดูุงุฎุชู ูุณุช
}
```

---

ุจู ุฏูุงู ฺฉู ุจู ุชุงุฑุฎฺูโ ุงูููโ ุฒุจุงู C ุจุงุฒูโฺฏุฑุฏุฏุ ุงูฺฉุงู ุฏุงุฑุฏ ฺฉ struct ู ฺฉ ุบุฑ-struct ุจุง ฺฉ ูุงู ฺฉุณุงู ุฏุฑ ููุงู ุฏุงููู ุชุนุฑู ุดููุฏ.
ุจุฑุง ูุซุงู:

```cpp
struct stat { /* ... */ };
int stat(char* name, struct stat* buf);
```

ุฏุฑ ุงู ุญุงูุชุ ูุงู ุณุงุฏูโ `stat` ูุฑุจูุท ุจู ุบุฑ-struct ุงุณุชุ ู ุจุฑุง ุงุดุงุฑู ุจู struct ุจุงุฏ ุงุฒ ูพุดููุฏ `struct` ุงุณุชูุงุฏู ุดูุฏ.
ุจู ููู ุชุฑุชุจุ ฺฉููุงุช ฺฉูุฏ `class`ุ `union` ู `enum` ูุฒ ูโุชูุงููุฏ ุจู ุนููุงู ูพุดููุฏ ุจุฑุง ุฑูุน ุงุจูุงู ุงุณุชูุงุฏู ุดููุฏ.

ุจุง ุงู ุญุงูุ ุจูุชุฑ ุงุณุช ูุงูโูุง ุฑุง ุจูโฺฏูููโุง ุงูุชุฎุงุจ ฺฉูู ฺฉู ูุงุฒ ุจู ฺูู ุฑูุน ุงุจูุงู ุจู ูุฌูุฏ ูุงุฏ.

## Structures and Classes
ฺฉ **struct** ุฏุฑ ูุงูุน ููุงู **class** ุงุณุช ุจุง ุงู ุชูุงูุช ฺฉู ุงุนุถุง ุขู ุจูโุทูุฑ ูพุดโูุฑุถ **public** ูุณุชูุฏ. ุจูุงุจุฑุงูุ ฺฉ struct ูโุชูุงูุฏ **ุชุงุจุน ุนุถู** ูู ุฏุงุดุชู ุจุงุดุฏ (ุจุฎุด ยง2.3.2 ู ูุตู 16). ุจูโุทูุฑ ุฎุงุตุ ฺฉ struct ูโุชูุงูุฏ **ุณุงุฒูุฏู (constructor)** ุฏุงุดุชู ุจุงุดุฏ.
ุจุฑุง ูุซุงู:

```cpp
struct Points {
    vector<Point> elem; // ุจุงุฏ ุญุฏุงูู ฺฉ Point ุฏุฑ ุฎูุฏ ุฏุงุดุชู ุจุงุดุฏ
    Points(Point p0) { elem.push_back(p0); }
    Points(Point p0, Point p1) { elem.push_back(p0); elem.push_back(p1); }
    // ...
};
```

```cpp
Points x0; // ุฎุทุง: ุณุงุฒูุฏูโ ูพุดโูุฑุถ ูุฌูุฏ ูุฏุงุฑุฏ
Points x1{ {100,200} }; // ฺฉ Point
Points x1{ {100,200}, {300,400} }; // ุฏู Point
```

---

ูุงุฒ ูุณุช ุจุฑุง ููุฏุงุฑุฏู ุงุนุถุง ุจู ุชุฑุชุจุ ุญุชูุงู ฺฉ ุณุงุฒูุฏู ุชุนุฑู ฺฉูุฏ.
ุจุฑุง ูุซุงู:

```cpp
struct Point {
    int x, y;
};
```

```cpp
Point p0;       // ุฎุทุฑูุงฺฉ: ุงฺฏุฑ ุฏุฑ ูุญุฏูุฏูโ ูุญู ุจุงุดุฏ ุจุฏูู ููุฏุงุฑ ุงููู ุงุณุช (ยง6.3.5.1)
Point p1 {};    // ุณุงุฒูุฏูโ ูพุดโูุฑุถ: {{},{}} ุนู {0,0}
Point p2 {1};   // ุนุถู ุฏูู ุจูโุทูุฑ ูพุดโูุฑุถ ููุฏุงุฑุฏู ูโุดูุฏ: {1,{}} ุนู {1,0}
Point p3 {1,2}; // {1,2}
```

---

**ุณุงุฒูุฏูโูุง** ุฒูุงู ูุงุฒู ูโุดููุฏ ฺฉู ุจุฎูุงูุฏ:

* ุชุฑุชุจ ุขุฑฺฏููุงูโูุง ุฑุง ุชุบุฑ ุฏูุฏุ
* ุขุฑฺฏููุงูโูุง ุฑุง ุงุนุชุจุงุฑุณูุฌ ฺฉูุฏุ
* ุขุฑฺฏููุงูโูุง ุฑุง ุงุตูุงุญ ฺฉูุฏุ
* ุง **invariant**ูุง (ููุฏ ูพุงุฏุงุฑ) ุจุฑูุฑุงุฑ ฺฉูุฏ (ยง2.4.3.2ุ ยง13.4).

ุจุฑุง ูุซุงู:

```cpp
struct Address {
    string name;    // "Jim Dandy"
    int number;     // 61
    string street;  // "South St"
    string town;    // "New Providence"
    char state[2];  // 'N' 'J'
    char zip[5];    // 07974
    Address(const string n, int nu, const string& s, const string& t, const string& st, int z);
};
```

ุงูุฌุง ฺฉ **ุณุงุฒูุฏู** ุงุถุงูู ุดุฏู ุชุง ูุทูุฆู ุดูู ุชูุงู ุงุนุถุง ููุฏุงุฑุฏู ุดุฏูโุงูุฏ ู ุจุชูุงูู ฺฉุฏ ูพุณุช ุฑุง ุจุง ฺฉ ุฑุดุชู ู ฺฉ ุนุฏุฏ ุฏุฑุงูุช ฺฉูู (ูู ุงูฺฉู ูุฌุจูุฑ ุดูู ุชฺฉโุชฺฉ ฺฉุงุฑุงฺฉุชุฑูุง ุฑุง ุฏุณุชฺฉุงุฑ ฺฉูู).

ูุซุงู ุงุณุชูุงุฏู:

```cpp
Address jd = {
    "Jim Dandy",
    61, "South St",
    "New Providence",
    "NJ", 7974 // ุชูุฌู: 07974 ุนุฏุฏ ูุดุชโุดุงูุฒุฏู ูุญุณูุจ ูโุดูุฏ (ยง6.2.4.1)
};
```

---

ุณุงุฒูุฏูโ `Address` ูโุชูุงูุฏ ุงูโุทูุฑ ูพุงุฏูโุณุงุฒ ุดูุฏ:

```cpp
Address::Address(const string& n, int nu, const string& s,
                 const string& t, const string& st, int z)
    // ุงุนุชุจุงุฑุณูุฌ ฺฉุฏ ูพุณุช
    :name{n},
     number{nu},
     street{s},
     town{t}
{
    if (st.size()!=2)
        error("State abbreviation should be two characters");
    state = {st[0], st[1]}; // ุฐุฎุฑูโ ฺฉุฏ ุงุงูุช ุจูโุตูุฑุช ฺฉุงุฑุงฺฉุชุฑ

    ostringstream ost; // ุฑุดุชูโุฌุฑุงู ุฎุฑูุฌุ ูฺฏุงู ฺฉูุฏ ุจู ยง38.4.2
    ost << z;          // ุงุณุชุฎุฑุงุฌ ฺฉุงุฑุงฺฉุชุฑูุง ุงุฒ int
    string zi {ost.str()};

    switch (zi.size()) {
    case 5:
        zip = {zi[0], zi[1], zi[2], zi[3], zi[4]};
        break;
    case 4: // ุจุง โ0โ ุดุฑูุน ูโุดูุฏ
        zip = {'0', zi[0], zi[1], zi[2], zi[3]};
        break;
    default:
        error("unexpected ZIP code format");
    }

    // ... ุจุฑุฑุณ ฺฉูุฏ ฺฉู ฺฉุฏ ูุนุชุจุฑ ุจุงุดุฏ ...
}
```

## Structures and Arrays
ุจูโุทูุฑ ุทุจุน ูโุชูุงูู ุขุฑุงูโุง ุงุฒ **struct**โูุง ู ููฺูู **struct**โูุง ุดุงูู ุขุฑุงู ุฏุงุดุชู ุจุงุดู. ุจุฑุง ูุซุงู:

```cpp
struct Point {
    int x, y;
};
Point points[3] {{1,2},{3,4},{5,6}};
int x2 = points[2].x;

struct Array {
    Point elem[3];
};
Array points2 {{1,2},{3,4},{5,6}};
int y2 = points2.elem[2].y;
```

ูุฑุงุฑ ุฏุงุฏู ฺฉ ุขุฑุงูู ุฏุฑููโุณุงุฎุชู (built-in array) ุฏุฑ ฺฉ **struct** ุจู ูุง ุงุฌุงุฒู ูโุฏูุฏ ุขู ุขุฑุงู ุฑุง ูุซู ฺฉ ุดุก ุฏุฑ ูุธุฑ ุจฺฏุฑู:
ูโุชูุงูู **struct** ุญุงู ุขู ุฑุง ุฏุฑ **ููุฏุงุฑุฏู ุงููู** (ุงุฒ ุฌููู ุฏุฑ ุงุฑุณุงู ุขุฑฺฏููุงู ู ุจุงุฒฺฏุฑุฏุงูุฏู ุงุฒ ุชุงุจุน) ู ููฺูู ุฏุฑ **ุนููุงุช ุงูุชุณุงุจ** ฺฉูพ ฺฉูู. ุจุฑุง ูุซุงู:

```cpp
Array shift(Array a, Point p)
{
    for (int i=0; i!=3; ++i) {
        a.elem[i].x += p.x;
        a.elem[i].y += p.y;
    }
    return a;
}
Array ax = shift(points2,{10,20});
```

ุงุฏุฏุงุดุช ูุฑุจูุท ุจู `Array` ฺฉู ุงุจุชุฏุง ุงุณุช: ฺุฑุง `i!=3`ุ ฺุฑุง ุจุงุฏ ูุฑุชุจ `.elem[i]` ุฑุง ุชฺฉุฑุงุฑ ฺฉููุ ฺุฑุง ููุท ุงููุงูโูุง ุงุฒ ููุน `Point`ุ
ฺฉุชุงุจุฎุงููู ุงุณุชุงูุฏุงุฑุฏุ `std::array` ุฑุง (ุจุฎุด ยง34.2.1) ุจู ุนููุงู ฺฉ ุชูุณุนูู ฺฉุงููโุชุฑ ู ุฒุจุงุชุฑ ุงุฒ ุงุฏูู ุขุฑุงูู ุจุง ุงูุฏุงุฒู ุซุงุจุช ุจู ุตูุฑุช struct ูุฑุงูู ฺฉุฑุฏู ุงุณุช:

```cpp
template<typename T, size_t N >
struct array { // ุณุงุฏูโุดุฏู (ุจุฎุด ยง34.2.1 ุฑุง ุจุจูุฏ)
    T elem[N];

    T* begin() noexcept { return elem; }
    const T* begin() const noexcept { return elem; }

    T* end() noexcept { return elem+N; }
    const T* end() const noexcept { return elem+N; }

    constexpr size_t size() noexcept;

    T& operator[](size_t n) { return elem[n]; }
    const T& operator[](size_type n) const { return elem[n]; }

    T* data() noexcept { return elem; }
    const T* data() const noexcept { return elem; }
    // ...
};
```

ุงู `array` ฺฉ **ูุงูุจ (template)** ุงุณุช ุชุง ูุฑ ุชุนุฏุงุฏ ุฏูุฎูุงู ุงุฒ ุนูุงุตุฑ ูุฑ ููุน ุฏูุฎูุงู ุฑุง ูพุดุชุจุงู ฺฉูุฏ. ููฺูู ุจู ุทูุฑ ูุณุชูู ุจุง ุงูฺฉุงู **ุงุณุชุซูุงูุง** (ยง13.5.1.1) ู ุงุดุงุก **const** (ยง16.2.9.1) ุณุฑูฺฉุงุฑ ุฏุงุฑุฏ. ุจุง ุงุณุชูุงุฏู ุงุฒ `array` ูโุชูุงูู ฺูู ุจููุณู:

```cpp
struct Point {
    int x,y;
};
using Array = array<Point,3>; // ุขุฑุงูโุง ุงุฒ 3 Point

Array points {{1,2},{3,4},{5,6}};
int x2 = points[2].x;
int y2 = points[2].y;

Array shift(Array a, Point p)
{
    for (int i=0; i!=a.size(); ++i) {
        a[i].x += p.x;
        a[i].y += p.y;
    }
    return a;
}
Array ax = shift(points,{10,20});
```

ูุฒุงุง ุงุตู `std::array` ูุณุจุช ุจู ุขุฑุงูู ุฏุฑููโุณุงุฎุชู ุงู ุงุณุช ฺฉู:

* ฺฉ ููุน ุดุก ูุงูุน ุงุณุช (ุฏุงุฑุง ุงูุชุณุงุจ ู ...).
* ุจู ุทูุฑ ุถูู ุจู ฺฉ ุงุดุงุฑูโฺฏุฑ ุจู ฺฉ ุนูุตุฑ ูููุฑุฏ ุชุจุฏู ููโุดูุฏ.

ูุซุงู:

```cpp
ostream& operator<<(ostream& os, Point p)
{
    cout << '{' << p.x << ',' << p.y << '}';
}

void print(Point a[],int s) // ุจุงุฏ ุชุนุฏุงุฏ ุนูุงุตุฑ ูุดุฎุต ุดูุฏ
{
    for (int i=0; i!=s; ++i)
        cout << a[i] << '\n';
}

template<typename T, int N>
void print(array<T,N>& a)
{
    for (int i=0; i!=a.size(); ++i)
        cout << a[i] << '\n';
}

Point point1[] = {{1,2},{3,4},{5,6}}; // 3 ุนูุตุฑ
array<Point,3> point2 = {{1,2},{3,4},{5,6}}; // 3 ุนูุตุฑ

void f()
{
    print(point1,4); // 4 ฺฉ ุฎุทุง ุจุฏ ุงุณุช
    print(point2);
}
```

ุนุจ `std::array` ุฏุฑ ููุงุณู ุจุง ุขุฑุงูู ุฏุฑููโุณุงุฎุชู ุงู ุงุณุช ฺฉู ููโุชูุงูู ุชุนุฏุงุฏ ุนูุงุตุฑ ุฑุง ุงุฒ ุทูู **initializer** ุงุณุชูุชุงุฌ ฺฉูู:

```cpp
Point point1[] = {{1,2},{3,4},{5,6}}; // 3 ุนูุตุฑ
array<Point,3> point2 = {{1,2},{3,4},{5,6}}; // 3 ุนูุตุฑ
array<Point> point3 = {{1,2},{3,4},{5,6}};   // ุฎุทุง
```

## Type Equivalence
ุฏู **struct** ุญุช ุฒูุงู ฺฉู ุงุนุถุง ฺฉุณุงู ุฏุงุฑูุฏุ ููุนโูุง ูุชูุงูุช ูุญุณูุจ ูโุดููุฏ.
ุจุฑุง ูุซุงู:

```cpp
struct S1 { int a; };
struct S2 { int a; };
```

`S1` ู `S2` ุฏู ููุน ูุชูุงูุช ูุณุชูุฏุ ุจูุงุจุฑุงู:

```cpp
S1 x;
S2 y = x; // ุฎุทุง: ุนุฏู ุชุทุงุจู ููุน
```

ฺฉ **struct** ููฺูู ุจุง ููุน ฺฉู ุจูโุนููุงู ุนุถู ุฏุฑ ุขู ุงุณุชูุงุฏู ุดุฏูุ ูุชูุงูุช ุงุณุช.
ุจุฑุง ูุซุงู:

```cpp
S1 x;
int i = x; // ุฎุทุง: ุนุฏู ุชุทุงุจู ููุน
```

ูุฑ **struct** ุจุงุฏ ุฏุฑ ฺฉ ุจุฑูุงูู ุชุนุฑู ฺฉุชุง ุฏุงุดุชู ุจุงุดุฏ (ยง15.2.3).

## 8.2.6 Plain Old Data
ฺฏุงู ุงููุงุช ูโุฎูุงูู ุจุง ฺฉ ุดุก ูุซู ยซุฏุงุฏูโ ุฎุงู ูุฏูยป (**Plain Old Data = POD**) ุฑูุชุงุฑ ฺฉูู (ุนู ุจูโุนููุงู ฺฉ ุฏูุจุงููโ ูพูุณุชู ุงุฒ ุจุงุชโูุง ุฏุฑ ุญุงูุธู) ู ูฺฏุฑุงู ููุงูู ูุนูุง ูพุดุฑูุชูโุชุฑุ ูุงููุฏ **ฺูุฏุฑุฎุช ุฏุฑ ุฒูุงู ุงุฌุฑุง** (ยง3.2.3, ยง20.3.2)ุ **ุณููุชฺฉ ฺฉูพ ุชุนุฑูโุดุฏู ุชูุณุท ฺฉุงุฑุจุฑ** (ยง3.3, ยง17.5) ู ุบุฑู ูุจุงุดู.
ุฏูู ุงูุฌุงู ุงู ฺฉุงุฑ ุงุบูุจ ุงู ุงุณุช ฺฉู ุจุชูุงูู ุงุดุงุก ุฑุง ุจู ูุคุซุฑุชุฑู ุดฺฉู ฺฉู ุณุฎุชโุงูุฒุงุฑ ุงุฌุงุฒู ูโุฏูุฏ ุฌุงุจูโุฌุง ฺฉูู.

ุจุฑุง ูุซุงูุ ฺฉูพ ฺฉุฑุฏู ฺฉ ุขุฑุงูโ 100 ุนูุตุฑ ุจุง 100 ุจุงุฑ ูุฑุงุฎูุงู ุณุงุฒูุฏูโ ฺฉูพ ุจูโุทูุฑ ูุนููู ุจูโุงูุฏุงุฒูโ ฺฉ ูุฑุงุฎูุงู ุจู `std::memcpy()` ุณุฑุน ูุณุชุ ฺูู `memcpy` ูุนูููุงู ุชููุง ุงุฒ ฺฉ ุฏุณุชูุฑ ุณุฎุชโุงูุฒุงุฑ **ุงูุชูุงู ุจููฺฉ ุญุงูุธู** ุงุณุชูุงุฏู ูโฺฉูุฏ. ุญุช ุงฺฏุฑ ุณุงุฒูุฏู ฺฉูพ inline ุดูุฏุ ููฺฉู ุงุณุช ุจูููโุณุงุฒ ูุชูุงูุฏ ฺูู ุจูููโุณุงุฒโุง ุฑุง ฺฉุดู ฺฉูุฏ. ุงูโฺฏููู ยซุชุฑููุฏูุงยป ุฏุฑ ูพุงุฏูโุณุงุฒ **ฺฉุงูุชูุฑูุง** (ูุงููุฏ `vector`) ู ุฏุฑ **ุฑูุงูโูุง ุณุทุญ ูพุงู I/O** ูุชุฏุงูู ู ููู ูุณุชูุฏุ ุงูุง ุฏุฑ ฺฉุฏูุง ุณุทุญ ุจุงูุงุชุฑ ุบุฑุถุฑูุฑ ุจูุฏู ู ุจูุชุฑ ุงุณุช ุงุฒ ุขูโูุง ูพุฑูุฒ ุดูุฏ.

ุจูุงุจุฑุงูุ ฺฉ **POD** ุดุฆ ุงุณุช ฺฉู ูโุชูุงู ุจุง ุขู ูุงููุฏ ยซููุท ุฏุงุฏูยป ุฑูุชุงุฑ ฺฉุฑุฏุ ุจุฏูู ูฺฏุฑุงู ุงุฒ ูพฺุฏฺฏโูุง ูุฑุจูุท ุจู ฺุฏูุงู ฺฉูุงุณ ุง ูุนูุงูุง ุชุนุฑูโุดุฏู ุชูุณุท ฺฉุงุฑุจุฑ ุจุฑุง **ุณุงุฒูุฏูุ ฺฉูพ ู ุฌุงุจูโุฌุง**.

ุจุฑุง ูุซุงู:

```cpp
struct S0 { };                        // ฺฉ POD
struct S1 { int a; };                 // ฺฉ POD
struct S2 { int a; S2(int aa) : a(aa) { } }; // POD ูุณุช (ุณุงุฒูุฏู ูพุดโูุฑุถ ูุฏุงุฑุฏ)
struct S3 { int a; S3(int aa) : a(aa) { } S3() {} }; // ฺฉ POD (ุณุงุฒูุฏู ูพุดโูุฑุถ ุชุนุฑูโุดุฏู)
struct S4 { int a; S4(int aa) : a(aa) { } S4() = default; }; // ฺฉ POD
struct S5 { virtual void f(); };       // POD ูุณุช (ุชุงุจุน ูุฌุงุฒ ุฏุงุฑุฏ)
struct S6 : S1 { };                   // ฺฉ POD
struct S7 : S0 { int b; };            // ฺฉ POD
struct S8 : S1 { int b; };            // POD ูุณุช (ุฏุงุฏู ูู ุฏุฑ S1 ู ูู ุฏุฑ S8 ุงุณุช)
struct S9 : S0, S1 {};                // ฺฉ POD
```

ุจุฑุง ุงูฺฉู ุจุชูุงูู ุจุง ฺฉ ุดุก ูุงููุฏ POD ุฑูุชุงุฑ ฺฉููุ ุขู ุดุก ุจุงุฏ:

* ฺุฏูุงู ูพฺุฏู ูุฏุงุดุชู ุจุงุดุฏ (ูุซูุงู vptr ูุฏุงุดุชู ุจุงุดุฏุ ยง3.2.3, ยง20.3.2)ุ
* ุณููุชฺฉ ฺฉูพ ุบุฑ ุงุณุชุงูุฏุงุฑุฏ (ุชุนุฑูโุดุฏู ุชูุณุท ฺฉุงุฑุจุฑ) ูุฏุงุดุชู ุจุงุดุฏุ ู
* ุณุงุฒูุฏูโ ูพุดโูุฑุถ ุณุงุฏู (trivial) ุฏุงุดุชู ุจุงุดุฏ.

ูุงุถุญ ุงุณุช ฺฉู ุจุงุฏ ุชุนุฑู ุฏูู POD ูุดุฎุต ุจุงุดุฏ ุชุง ุชููุง ุฏุฑ ุฌุงูุง ุงุฒ ุงู ุจูููโุณุงุฒโูุง ุงุณุชูุงุฏู ฺฉูู ฺฉู ุชุถููโูุง ุฒุจุงู ุดฺฉุณุชู ูุดูุฏ.

ุจูโุทูุฑ ุฑุณู (ยงiso.3.9, ยงiso.9)ุ ฺฉ ุดุก POD ุจุงุฏ:

* **ุงุฒ ููุน ุจุง ฺุฏูุงู ุงุณุชุงูุฏุงุฑุฏ (standard layout type)** ุจุงุดุฏุ
* **ุงุฒ ููุน ูุงุจู ฺฉูพ ุณุงุฏู (trivially copyable)** ุจุงุดุฏุ
* **ู ฺฉ ุณุงุฒูุฏูโ ูพุดโูุฑุถ ุณุงุฏู ุฏุงุดุชู ุจุงุดุฏ**.

ููููู ูุฑุชุจุท ุฏฺฏุฑ ูู ูุณุช ุจู ูุงู **ููุน ุณุงุฏู (trivial type)** ฺฉู ูฺฺฏโูุง ุฒุฑ ุฑุง ุฏุงุฑุฏ:

* ุณุงุฒูุฏูโ ูพุดโูุฑุถ ุณุงุฏู ุฏุงุฑุฏ.
* ุนููฺฏุฑูุง ฺฉูพ ู ุฌุงุจูโุฌุง ุณุงุฏู ุฏุงุฑุฏ.

ุจูโุทูุฑ ุบุฑุฑุณูุ ฺฉ ุณุงุฒูุฏู ูพุดโูุฑุถ ุณุงุฏู ุงุณุช ุงฺฏุฑ ูฺ ฺฉุงุฑ ูุงุฒ ุจู ุงูุฌุงู ูุฏุงุดุชู ุจุงุดุฏ (ุงฺฏุฑ ูุงุฒ ุฏุงุดุชุฏ ฺฉ ุชุนุฑู ฺฉูุฏุ ุงุฒ `=default` ุงุณุชูุงุฏู ฺฉูุฏุ ยง17.6.1).

ฺฉ ููุน **ฺุฏูุงู ุงุณุชุงูุฏุงุฑุฏ (standard layout)** ูุฏุงุฑุฏ ุงฺฏุฑ:

* ุนุถู ุบุฑโุงุณุชุงุชฺฉ ุง ูพุงูโุง ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุฎูุฏ ฺุฏูุงู ุงุณุชุงูุฏุงุฑุฏ ูุฏุงุฑุฏุ
* ุชุงุจุน ูุฌุงุฒ ุฏุงุดุชู ุจุงุดุฏ (ยง3.2.3, ยง20.3.2)ุ
* ูพุงูโ ูุฌุงุฒ ุฏุงุดุชู ุจุงุดุฏ (ยง21.3.5)ุ
* ุนุถู ุงุฒ ููุน reference ุฏุงุดุชู ุจุงุดุฏ (ยง7.7)ุ
* ุจุฑุง ุฏุงุฏูโูุง ุบุฑโุงุณุชุงุชฺฉุ ฺูุฏู ุณุทุญ ุฏุณุชุฑุณ (`public/private/protected`) ุงุณุชูุงุฏู ฺฉูุฏ (ยง20.5)ุ ุง
* ูุงูุน ุจูููโุณุงุฒโูุง ููู ฺุฏูุงู ุดูุฏุ ูุงููุฏ:

  * ุฏุงุดุชู ุงุนุถุง ุบุฑโุงุณุชุงุชฺฉ ุฏุฑ ุจุด ุงุฒ ฺฉ ฺฉูุงุณ ูพุงู ุง ูู ุฏุฑ ฺฉูุงุณ ูุดุชู ู ูู ุฏุฑ ฺฉ ูพุงูุ ุง
  * ุฏุงุดุชู ฺฉูุงุณ ูพุงู ุงุฒ ููุงู ููุน ุจูโุนููุงู ุงููู ุนุถู ุบุฑโุงุณุชุงุชฺฉ.

ุจูโุทูุฑ ฺฉูุ ฺฉ ููุน **standard layout** ููุน ุงุณุช ฺฉู ฺุฏูุงู ุขู ูุนุงุฏู ูุงุถุญ ุฏุฑ ุฒุจุงู C ุฏุงุฑุฏ ู ุชูุณุท ABIูุง ุฑุงุฌ C++ ูุงุจู ูพุดุชุจุงู ุงุณุช.

ฺฉ ููุน **trivially copyable** ุงุณุช ูฺฏุฑ ุงูฺฉู ฺฉ ุนููุงุช ฺฉูพุ ุฌุงุจูโุฌุง ุง ุณุงุฒูุฏูโ ุบุฑุณุงุฏู ุฏุงุดุชู ุจุงุดุฏ (ยง3.2.1.2, ยง17.6).
ุจูโุทูุฑ ุบุฑุฑุณูุ ฺฉ ุนููุงุช ฺฉูพ ุณุงุฏู ุงุณุช ุงฺฏุฑ ุจุชูุงู ุขู ุฑุง ุจูโุตูุฑุช **ฺฉูพ ุจุช (bitwise copy)** ูพุงุฏูโุณุงุฒ ฺฉุฑุฏ.

ฺู ฺุฒ ุจุงุนุซ ูโุดูุฏ ฺฉ ฺฉูพุ ุฌุงุจูโุฌุง ุง ูุฎุฑุจ (destructor) ุบุฑุณุงุฏู ุจุงุดุฏุ

* ุงฺฏุฑ ุชูุณุท ฺฉุงุฑุจุฑ ุชุนุฑู ุดุฏู ุจุงุดุฏ.
* ุงฺฏุฑ ฺฉูุงุณ ุชุงุจุน ูุฌุงุฒ ุฏุงุดุชู ุจุงุดุฏ.
* ุงฺฏุฑ ฺฉูุงุณ ูพุงูโ ูุฌุงุฒ ุฏุงุดุชู ุจุงุดุฏ.
* ุงฺฏุฑ ฺฉูุงุณ ูพุงู ุง ุนุถู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุฎูุฏ ุณุงุฏู ูุณุช.

ฺฉ ุดุก ุงุฒ ููุน built-in ุจูโุทูุฑ ูพุดโูุฑุถ ูุงุจู ฺฉูพ ุณุงุฏู ุงุณุช ู ฺุฏูุงู ุงุณุชุงูุฏุงุฑุฏ ุฏุงุฑุฏ. ููฺููุ ุขุฑุงูโุง ุงุฒ ุงุดุงุก ูุงุจู ฺฉูพ ุณุงุฏูุ ุฎูุฏุด ูุงุจู ฺฉูพ ุณุงุฏู ุงุณุชุ ู ุขุฑุงูโุง ุงุฒ ุงุดุงุก ุจุง ฺุฏูุงู ุงุณุชุงูุฏุงุฑุฏ ูุฒ ููุงู ูฺฺฏ ุฑุง ุฏุงุฑุฏ.

ุจู ูุซุงู ุฒุฑ ุชูุฌู ฺฉูุฏ:

```cpp
template<typename T>
void mycopy(T* to, const T* from, int count);
```

ูุฑุถ ฺฉูุฏ ูโุฎูุงูู ุญุงูุช ุณุงุฏู ุฑุง ุจููู ฺฉูู ููุช ฺฉู `T` ฺฉ POD ุงุณุช. ูโุชูุงูู ุงู ฺฉุงุฑ ุฑุง ุจุง ูุฑุงุฎูุงู `mycopy()` ููุท ุจุฑุง PODูุง ุงูุฌุงู ุฏููุ ุงูุง ุงู ูพุฑุฎุทุงุณุช: ุขุง ูโุชูุงูู ูุทูุฆู ุจุงุดู ฺฉู ูฺฏูโุฏุงุฑูุฏูโ ฺฉุฏ ูุฑฺฏุฒ `mycopy()` ุฑุง ุจุฑุง ููุน ุบุฑ POD ุตุฏุง ููโุฒูุฏุ ูุงูุนโุจูุงููุ ุฎุฑ.
ุฌุงฺฏุฒู ุจูุชุฑ ุงู ุงุณุช ฺฉู ุงุฒ `std::copy()` ุงุณุชูุงุฏู ฺฉููุ ฺฉู ุจู ุงุญุชูุงู ุฒุงุฏ ุจุง ููุงู ุจูููโุณุงุฒ ููุฑุฏูุงุฒ ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช.

ุจูโูุฑุญุงูุ ุงู ูุณุฎูโ ุนููู ู ุจูููโุดุฏูโ ฺฉุฏ ุงุณุช:

```cpp
template<typename T>
void mycopy(T* to, const T* from, int count)
{
    if (is_pod<T>::value)
        memcpy(to, from, count * sizeof(T));
    else
        for (int i = 0; i != count; ++i)
            to[i] = from[i];
}
```

`is_pod` ฺฉ ูฺฺฏ (type trait) ุฏุฑ ฺฉุชุงุจุฎุงููโ ุงุณุชุงูุฏุงุฑุฏ ุงุณุช (ยง35.4.1) ฺฉู ุฏุฑ `<type_traits>` ุชุนุฑู ุดุฏู ู ุจู ูุง ุงุฌุงุฒู ูโุฏูุฏ ุฏุฑ ฺฉุฏ ุจูพุฑุณู: ยซุขุง `T` ฺฉ POD ุงุณุชุยป.
ุจูุชุฑู ูฺฉุชู ุฏุฑุจุงุฑูโ `is_pod<T>` ุงู ุงุณุช ฺฉู ูุง ุฑุง ุงุฒ ุญูุธ ฺฉุฑุฏู ููุงูู ุฏูู POD ุจโูุงุฒ ูโฺฉูุฏ.

ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุงุถุงูู ุง ุญุฐู ฺฉุฑุฏู ุณุงุฒูุฏูโูุง ุบุฑูพุดโูุฑุถ ุฑู **ฺุฏูุงู ุง ฺฉุงุฑุง** ุชุฃุซุฑ ูุฏุงุฑุฏ (ุงู ุฏุฑ C++98 ุฏุฑุณุช ูุจูุฏ).

ุงฺฏุฑ ุงุญุณุงุณ ฺฉุฑุฏุฏ ูโุฎูุงูุฏ ยซูฺฉู ุฒุจุงูยป ุดูุฏุ ููุงูู ฺุฏูุงู ู ุณุงุฏฺฏ (layout ู triviality) ุฑุง ุฏุฑ ุงุณุชุงูุฏุงุฑุฏ (ยงiso.3.9, ยงiso.9) ูุทุงูุนู ฺฉูุฏ ู ุจู ูพุงูุฏูุง ุขูโูุง ุจุฑุง ุจุฑูุงููโููุณุงู ู ุณุงุฒูุฏฺฏุงู ฺฉุงููพุงูุฑ ูฺฉุฑ ฺฉูุฏ. ุดุงุฏ ุงู ฺฉุงุฑ ูุจู ุงุฒ ุงูฺฉู ููุช ุฒุงุฏ ุงุฒ ุดูุง ุจฺฏุฑุฏุ ุดูุง ุฑุง ุงุฒ ุงู ุนูุงูู ููุตุฑู ฺฉูุฏ!

--------------
--------------
--------------
--------------
--------------

## ๐ข ฺุฑุง POD ููู ุงุณุชุ

* ููุช ุดุก ุฎู ุณุงุฏู ุจุงุดุฏ (ููุท ุฏุงุฏู)ุ ูโุชูุงูู ุขู ุฑุง ูุซู ฺฉ ุจููฺฉ ุจุงุช ุฌุงุจูโุฌุง ฺฉูู.
* ุงู ุฎู ุณุฑุนโุชุฑ ุงุณุช ฺูู ูโุดูุฏ ุจุง ุฏุณุชูุฑูุง ุณุฎุชโุงูุฒุงุฑ (ูุซู `memcpy`) ฺฉู ุญุงูุธู ุฑุง ฺฉุฌุง ฺฉูพ ฺฉุฑุฏ.
* ูู ุงฺฏุฑ ุดุก ูพฺุฏู ุจุงุดุฏ (ูุซูุงู ุชุงุจุน ูุฌุงุฒ ุง ุณุงุฒูุฏู ุฎุงุต ุฏุงุดุชู ุจุงุดุฏ)ุ ุจุงุฏ ฺฉโฺฉ ุจุง ุฏูุช ุฌุงุจูโุฌุง ุดูุฏ.

---

## ๐ข POD ุฏููุงู ุนู ฺูุ

ฺฉ ุดุก POD ุจุงุฏ ุงู ุดุฑุงุท ุฑุง ุฏุงุดุชู ุจุงุดุฏ:

1. **ฺุฏูุงู ุณุงุฏู**: ุญุงูุธูโุงุด ุดุจู struct ุฏุฑ C ุจุงุดุฏ.
2. **ฺฉูพโูพุฐุฑ ุจู ุตูุฑุช ุจุช**: ุนู ฺฉุงู ุจุงุดุฏ ุจุช ุจู ุจุช ุฌุงุจูโุฌุงุด ฺฉูู.
3. **ุณุงุฒูุฏู ูพุดโูุฑุถ ุจโฺฉุงุฑ (trivial)** ุฏุงุดุชู ุจุงุดุฏ: ุนู ุณุงุฎุชูุด ูฺ ฺฉุงุฑ ูฺฉูุฏ ุฌุฒ ุฑุฒุฑู ุญุงูุธู.

---

## ๐ข ฺูุฏ ููููู ูุฒุฏฺฉ

1. **Standard layout (ฺุฏูุงู ุงุณุชุงูุฏุงุฑุฏ):**
   ุนู ุดุก ุฏุฑ ุญุงูุธูุ ูุซู C ฺุฏู ุดุฏู ุจุงุดุฏ.

   * ูุจุงุฏ ุชุงุจุน ูุฌุงุฒ ุฏุงุดุชู ุจุงุดุฏ.
   * ูุจุงุฏ ูุฑุงุซุช ูุฌุงุฒ ุฏุงุดุชู ุจุงุดุฏ.
   * ูุจุงุฏ ฺูุฏ ุจุฎุด public/private ุจุง ุฏุงุฏู ุบุฑstatic ุฏุงุดุชู ุจุงุดุฏ.
   * ูุจุงุฏ ูู ุฏุฑ base ูู ุฏุฑ ุฎูุฏุด ุฏุงุฏู ุบุฑstatic ุฏุงุดุชู ุจุงุดุฏ.

2. **Trivially copyable (ูุงุจูโฺฉูพ ุณุงุฏู):**
   ุนู ูโุดูุฏ ุจุง ฺฉ `memcpy` ฺฉู ุดุก ุฑุง ุฌุงุจูโุฌุง ฺฉุฑุฏ.

   * ูุจุงุฏ ฺฉูพโุณุงุฒุ move ุง destructor ุฎุงุต ุฏุงุดุชู ุจุงุดุฏ.
   * ูุจุงุฏ ุชุงุจุน ูุฌุงุฒ ุง base ูุฌุงุฒ ุฏุงุดุชู ุจุงุดุฏ.

3. **Trivial type (ููุน ุณุงุฏู):**
   ุนู ุณุงุฒูุฏู ูพุดโูุฑุถ ู ุนููฺฏุฑ ฺฉูพ/move ููฺฏ trivial ุจุงุดูุฏ.

---

## ๐ข ฺู ฺุฒ ุจุงุนุซ ูโุดูุฏ trivial ูุจุงุดุฏุ

* ุงฺฏุฑ ฺฉูพโุณุงุฒ ุง move ุง destructor ุฑุง ุฎูุฏุช ุจููุณ โ ุฏฺฏุฑ trivial ูุณุช.
* ุงฺฏุฑ ุชุงุจุน ูุฌุงุฒ ุฏุงุดุชู ุจุงุดุฏ โ ุฏฺฏุฑ trivial ูุณุช.
* ุงฺฏุฑ ูุฑุงุซุช ูุฌุงุฒ ุฏุงุดุชู ุจุงุดุฏ โ ุฏฺฏุฑ trivial ูุณุช.

---

## ๐ข ูุซุงูโูุง

```cpp
struct S0 { };              // โ POD
struct S1 { int a; };       // โ POD
struct S2 { int a; S2(int x):a(x){} }; // โ ูู POD (ุณุงุฒูุฏู ุฎุงุต)
struct S3 { int a; S3(){} }; // โ POD (ุณุงุฒูุฏู ูพุดโูุฑุถ trivial)
struct S5 { virtual void f(); }; // โ ูู POD (ุชุงุจุน ูุฌุงุฒ)
struct S6 : S1 { };         // โ POD
struct S8 : S1 { int b; };  // โ ูู POD (ุฏุงุฏู ุฏุฑ base ู ุฎูุฏุด ููุฒูุงู)
```

---

## ๐ข ุฏุฑ ุนูู ฺู ฺฉููุ

* ุงฺฏุฑ ููุน POD ุจุงุดุฏ โ ูโุชูุงูู ุณุฑุน ุจุง `memcpy` ุฌุงุจูโุฌุง ฺฉูู.
* ุงฺฏุฑ ููุน ุบุฑ POD ุจุงุดุฏ โ ุจุงุฏ ุชฺฉโุชฺฉ ุจุง `=` ฺฉูพ ฺฉูู.

ฺฉุชุงุจุฎุงูู ุงุณุชุงูุฏุงุฑุฏ ุจุฑุง ุงู ฺฉุงุฑ ุงุจุฒุงุฑ ุฏุงุฑุฏ:

```cpp
#include <type_traits>

if (std::is_pod<T>::value) { /* ุณุฑุน */ }
else { /* ฺฉูพ ูุนููู */ }
```

---

## ๐ข ุฎูุงุตู ุฏุฑ ฺูุฏ ฺฉููู

* **POD**: ููุท ุฏุงุฏู ุณุงุฏูุ ูุซู struct ุฏุฑ C.
* **Standard layout**: ฺุฏูุงูุด ูุซู C ุจุงุดุฏ.
* **Trivially copyable**: ุจุดูุฏ ุจุง memcpy ฺฉูพ ฺฉุฑุฏ.
* **Trivial type**: ุณุงุฒูุฏู ู ฺฉูพโุณุงุฒ ุฎู ุณุงุฏู.

----------------------
----------------------
----------------------
----------------------
----------------------

ฺฉ ุดุก ุงุฒ ููุนโูุง ุฏุฑูู (built-in type) ุจู ุทูุฑ ูพุดโูุฑุถ **ุจูโุณุงุฏฺฏ ูุงุจู ฺฉูพโฺฉุฑุฏู** ุงุณุช (trivially copyable) ู **ฺุฏูุงู ุงุณุชุงูุฏุงุฑุฏ** ุฏุงุฑุฏ (standard layout). ููฺููุ ฺฉ ุขุฑุงู ุงุฒ ุงุดุง trivially copyable ุฎูุฏุด trivially copyable ุงุณุช ู ฺฉ ุขุฑุงู ุงุฒ ุงุดุง ุจุง ฺุฏูุงู ุงุณุชุงูุฏุงุฑุฏ ูู ฺุฏูุงู ุงุณุชุงูุฏุงุฑุฏ ุฏุงุฑุฏ.

ฺฉ ูุซุงู ุฏุฑ ูุธุฑ ุจฺฏุฑ:

```cpp
template<typename T>
void mycopy(T* to, const T* from, int count);
```

ูู ูโุฎูุงูู ุญุงูุช ุณุงุฏู ุฑุงุ ููุช `T` ฺฉ **POD** ุงุณุชุ ุจููู ฺฉูู.
ูโุชูุงูู ฺฉุงุฑ ฺฉูู ฺฉู ููุท ุจุฑุง PODูุง `mycopy()` ุตุฏุง ุฒุฏู ุดูุฏุ ุงูุง ุงู ฺฉุงุฑ ูพุฑุฎุทุงุณุช:
ุขุง ูโุชูุงูู ูุทูุฆู ุจุงุดู ุจุฑูุงููโููุณ ุฏฺฏุฑ ฺฉู ฺฉุฏ ุฑุง ูฺฏูุฏุงุฑ ูโฺฉูุฏ ููุดู ุงุฏุด ุจูุงูุฏ `mycopy()` ุฑุง ุฑู ููุนโูุง ุบุฑ POD ุตุฏุง ูุฒูุฏุ ูุงูุนโุจูุงูู ูฺฏุงู ฺฉููุ ุฎุฑ.

ุฑุงู ุฏฺฏุฑ ุงู ุงุณุช ฺฉู ุงุฒ `std::copy()` ุงุณุชูุงุฏู ฺฉููุ ฺฉู ุชูุฑุจุงู ููุดู ุจุง ุจูููโุณุงุฒ ูุงุฒู ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช.

ุจู ูุฑ ุญุงูุ ุงูุฌุง ฺฉุฏ ุนููู ู ุจูููโุดุฏู ุฑุง ุฏุงุฑู:

```cpp
template<typename T>
void mycopy(T* to, const T* from, int count)
{
    if (is_pod<T>::value)
        memcpy(to, from, count * sizeof(T));
    else
        for (int i = 0; i != count; ++i)
            to[i] = from[i];
}
```

`is_pod` ฺฉ ูฺฺฏ ููุน (type property predicate) ุฏุฑ ฺฉุชุงุจุฎุงูู ุงุณุชุงูุฏุงุฑุฏ ุงุณุช (ุชุนุฑูโุดุฏู ุฏุฑ `<type_traits>`) ฺฉู ุจู ูุง ุงุฌุงุฒู ูโุฏูุฏ ุฏุฑ ฺฉุฏ ุจูพุฑุณู: ยซุขุง T ฺฉ POD ุงุณุชุยป.
ุจูุชุฑู ูฺฉุชู ุฏุฑุจุงุฑูโ `is_pod<T>` ุงู ุงุณุช ฺฉู ูุง ุฑุง ุงุฒ ุญูุธโฺฉุฑุฏู ุชูุงู ููุงูู ุฏูู ุงูฺฉู ฺู ฺุฒ POD ุงุณุช ุง ููุ ุจโูุงุฒ ูโฺฉูุฏ.

ูฺฉุชู: ุงุถุงููโฺฉุฑุฏู ุง ุญุฐูโฺฉุฑุฏู ุณุงุฒูุฏูโูุง ูพุดโูุฑุถ ุฑู **ฺุฏูุงู ุง ฺฉุงุฑุง** ุชุฃุซุฑ ูุฏุงุฑุฏ (ุงู ููุถูุน ุฏุฑ C++98 ุฏุฑุณุช ูุจูุฏ).

ุงฺฏุฑ ุญุณ ูโฺฉูุฏ ูโุฎูุงูุฏ ยซูฺฉู ุฒุจุงูยป ุดูุฏุ ฺฉุงู ุงุณุช ููุงูู layout ู triviality ุฑุง ุฏุฑ ุงุณุชุงูุฏุงุฑุฏ ุจุฎูุงูุฏ (ุจุฎุดโูุง ยงiso.3.9 ู ยงiso.9) ู ุณุน ฺฉูุฏ ุจู ูพุงูุฏูุงุดุงู ุจุฑุง ุจุฑูุงููโููุณโูุง ู ุณุงุฒูุฏฺฏุงู ฺฉุงููพุงูุฑ ูฺฉุฑ ฺฉูุฏ. ุงู ฺฉุงุฑ ุดุงุฏ ูุจู ุงุฒ ุงูฺฉู ุฎู ููุชุชุงู ฺฏุฑูุชู ุดูุฏุ ุดูุง ุฑุง ุงุฒ ุงุฏุงููโ ุงู ูุณุฑ ููุตุฑู ฺฉูุฏ.

----------------------
----------------------
----------------------
----------------------
----------------------

## Fields
ุญุช ุงฺฏุฑ ุงุณุชูุงุฏู ุงุฒ ฺฉ ุจุงุช ฺฉุงูู (ูุซู ฺฉ `char` ุง `bool`) ุจุฑุง ููุงุด ฺฉ ูุชุบุฑ ุฏูุฏู โ ูุซูุงู ฺฉ ฺฉูุฏ ุฑูุดู/ุฎุงููุด โ ูพุฑูุฒูู ุจู ูุธุฑ ุจุฑุณุฏุ ุงูุง ุฏุฑ C++ ฺฉูฺฺฉโุชุฑู ุดุกุง ฺฉู ูโุชูุงูุฏ ุจูโุทูุฑ ูุณุชูู ุชุฎุตุต ุฏุงุฏู ุดูุฏ ู ุขุฏุฑุณโูพุฐุฑ ุจุงุดุฏ ููุงู `char` ุงุณุช (ยง7.2). ุจุง ุงู ุญุงูุ ูโุชูุงู ฺูุฏู ูุชุบุฑ ุฎู ฺฉูฺฺฉ ุงุฒ ุงู ููุน ุฑุง ฺฉูุงุฑ ูู ุฏุฑ ูุงูุจ *field*โูุง ุฏุฑ ฺฉ `struct` ูุฑุงุฑ ุฏุงุฏ.

ุจู ฺูู ููุฏ ูุนูููุงู *bit-field* ฺฏูุชู ูโุดูุฏ. ฺฉ ุนุถู ุฒูุงู ุจูโุตูุฑุช *field* ุชุนุฑู ูโุดูุฏ ฺฉู ุชุนุฏุงุฏ ุจุชโูุง ฺฉู ุจุงุฏ ุงุดุบุงู ฺฉูุฏ ูุดุฎุต ุดูุฏ. ููุฏูุง ุจุฏููโูุงู ูุฒ ูุฌุงุฒ ูุณุชูุฏ. ุงูโูุง ุจุฑ ูุนูุง ููุฏูุง ูุงูโุฏุงุฑ ุงุซุฑ ูุฏุงุฑูุฏุ ุงูุง ูโุชูุงู ุงุฒ ุขูโูุง ุจุฑุง ุจูุจูุฏ ฺุฏูุงู ุฏุฑ ุณุทุญ ูุงุดู (ูุงุจุณุชู ุจู ูุนูุงุฑ) ุงุณุชูุงุฏู ฺฉุฑุฏ:

```cpp
struct PPN { // R6000 Physical Page Number
    unsigned int PFN : 22;  // Page Frame Number
    int : 3;                // ุงุณุชูุงุฏูโูุดุฏู
    unsigned int CCA : 3;   // Cache Coherency Algorithm
    bool nonreachable : 1;
    bool dirty : 1;
    bool valid : 1;
    bool global : 1;
};
```

ุงู ูุซุงู ููฺูู ฺฉุงุฑุจุฑุฏ ุงุตู ุฏฺฏุฑ ููุฏูุง ุฑุง ูุดุงู ูโุฏูุฏ: ูุงูโฺฏุฐุงุฑ ุจุฎุดโูุง ุงุฒ ฺฉ *ฺุฏูุงู ุชุญูู ุจุฑูู*.
ฺฉ ููุฏ ุจุงุฏ ุงุฒ ููุน ุนุฏุฏ ุตุญุญ ุง ููุน ุดูุงุฑุด ุจุงุดุฏ (ยง6.2.1). ฺฏุฑูุชู ุขุฏุฑุณ ฺฉ ููุฏ ููฺฉู ูุณุช. ุจุง ุงู ุญุงูุ ุบุฑ ุงุฒ ุงู ููุฑุฏุ ูโุชูุงู ุงุฒ ุขู ุฏุฑุณุช ูุซู ุณุงุฑ ูุชุบุฑูุง ุงุณุชูุงุฏู ฺฉุฑุฏ. ุชูุฌู ฺฉูุฏ ฺฉู ฺฉ ููุฏ `bool` ูุงูุนุงู ูโุชูุงูุฏ ููุท ุจุง ฺฉ ุจุช ููุงุด ุฏุงุฏู ุดูุฏ.

ุฏุฑ ฺฉ ูุณุชู ุณุณุชูโุนุงูู ุง ุฏุฑ ฺฉ ุฏุจุงฺฏุฑุ ููุน `PPN` ููฺฉู ุงุณุช ุจู ุงู ุดฺฉู ุงุณุชูุงุฏู ุดูุฏ:

```cpp
void part_of_VM_system(PPN* p)
{
    // ...
    if (p->dirty) {   // ูุญุชูุง ุชุบุฑ ฺฉุฑุฏู
        // ฺฉูพ ุฑู ุฏุณฺฉ
        p->dirty = 0;
    }
}
```

ุดฺฏูุชโุขูุฑ ุงุณุช ฺฉู ุงุณุชูุงุฏู ุงุฒ ููุฏูุง ุจุฑุง ูุดุฑุฏูโุณุงุฒ ฺูุฏ ูุชุบุฑ ุฏุฑ ฺฉ ุจุงุช ุงูุฒุงูุงู ุจุงุนุซ ุตุฑููโุฌู ุฏุฑ ูุถุง ููโุดูุฏ. ุงู ุฑูุด ูุถุง ุฏุงุฏู ุฑุง ฺฉุงูุด ูโุฏูุฏุ ุงูุง ุงูุฏุงุฒู ฺฉุฏ ฺฉู ุจุฑุง ุฏุณุชฺฉุงุฑ ุงู ูุชุบุฑูุง ูุงุฒู ุงุณุชุ ุฑู ุจุดุชุฑ ูุงุดูโูุง ุงูุฒุงุด ูโุงุจุฏ. ุญุช ุฏุฑ ุจุฑุฎ ุจุฑูุงููโูุง ุฏุฏู ุดุฏู ฺฉู ููุช ูุชุบุฑูุง ุฏูุฏู ุงุฒ *bit-field* ุจู `char` ุชุจุฏู ุดุฏูุฏุ ฺฉู ุจุฑูุงูู ฺฉูฺฺฉโุชุฑ ุดุฏู ุงุณุช!

ุนูุงูู ุจุฑ ุงูุ ูุนูููุงู ุฏุณุชุฑุณ ุจู ฺฉ `char` ุง `int` ุจุณุงุฑ ุณุฑุนโุชุฑ ุงุฒ ุฏุณุชุฑุณ ุจู ฺฉ ููุฏ ุงุณุช. ููุฏูุง ุฏุฑ ูุงูุน ููุท ฺฉ ูุงูโุจูุฑ ุฑุงุญุช ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุนููฺฏุฑูุง ููุทู ุจุช (ยง11.1.1) ูุณุชูุฏ ุชุง ุจุชูุงู ุงุฒ ฺฉ ุจุฎุด ุฎุงุต ุงุฒ ฺฉ ฺฉููู (word) ุงุทูุงุนุงุช ุงุณุชุฎุฑุงุฌ ุง ุฏุฑ ุขู ุฏุฑุฌ ฺฉุฑุฏ.

## Unions
ฺฉ **union** ููุน **struct** ุงุณุช ฺฉู ุฏุฑ ุขู ุชูุงู ุงุนุถุง ุฏุฑ ฺฉ ุขุฏุฑุณ ูุฑุงุฑ ูโฺฏุฑูุฏุ ุจูุงุจุฑุงู **union ููุท ุจู ุงูุฏุงุฒูู ุจุฒุฑฺฏโุชุฑู ุนุถู ุฎูุฏ ูุถุง ุงุดุบุงู ูโฺฉูุฏ**. ุทุจุนุชุงูุ ฺฉ union ุฏุฑ ูุฑ ูุญุธู ูโุชูุงูุฏ ููุท ููุฏุงุฑ ฺฉ ุงุฒ ุงุนุถุงุด ุฑุง ูฺฏู ุฏุงุฑุฏ.

ุจูโุนููุงู ูุซุงูุ ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ ฺฉ **ูุฑูุฏ ุฌุฏูู ููุงุฏูุง (symbol table)** ฺฉู ุดุงูู ฺฉ ูุงู ู ฺฉ ููุฏุงุฑ ุงุณุช:

```cpp
enum Type { str, num };

struct Entry {
    char* name;
    Type t;
    char* s; // ุงุณุชูุงุฏู ุดูุฏ ุงฺฏุฑ t == str
    int i;   // ุงุณุชูุงุฏู ุดูุฏ ุงฺฏุฑ t == num
};

void f(Entry* p)
{
    if (p->t == str)
        cout << p->s;
    // ...
}
```

ุงุนุถุง **s** ู **i** ูุฑฺฏุฒ ููโุชูุงููุฏ ููโุฒูุงู ุงุณุชูุงุฏู ุดููุฏุ ุจูุงุจุฑุงู ูุถุง ูุฏุฑ ูโุฑูุฏ. ุงู ูุถุง ุจูโุฑุงุญุช ูโุชูุงูุฏ ุจุง ูุดุฎุต ฺฉุฑุฏู ุงูฺฉู ูุฑ ุฏู ุนุถู ฺฉ **union** ุจุงุดูุฏุ ุจุงุฒุงุจ ุดูุฏ:

```cpp
union Value {
    char* s;
    int i;
};
```

ุฒุจุงู ++C ูพฺฏุฑ ููโฺฉูุฏ ฺฉู union ุฏุฑ ุญุงู ุญุงุถุฑ ฺู ููุน ููุฏุงุฑ ูฺฏู ูโุฏุงุฑุฏุ ุจูุงุจุฑุงู ุงู ูุธููู ุจุฑูุงููโููุณ ุงุณุช:

```cpp
struct Entry {
    char* name;
    Type t;
    Value v; // ุงฺฏุฑ t == str ุงุฒ v.s ุงุณุชูุงุฏู ุดูุฏุ ุงฺฏุฑ t == num ุงุฒ v.i ุงุณุชูุงุฏู ุดูุฏ
};

void f(Entry* p)
{
    if (p->t == str)
        cout << p->v.s;
    // ...
}
```

ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุทุงุ ูโุชูุงู union ุฑุง **ฺฉูพุณููู (encapsulate)** ฺฉุฑุฏ ุชุง ุงุฑุชุจุงุท ุจู ููุฏ ููุน (**type field**) ู ุฏุณุชุฑุณ ุจู ุงุนุถุง union ุชุถูู ุดูุฏ (ยง8.3.2).

---

ฺฏุงู ุงููุงุช **union ุจูโุงุดุชุจุงู ุจุฑุง "ุชุจุฏู ููุน" ุงุณุชูุงุฏู ูโุดูุฏ**. ุงู ุณูุกุงุณุชูุงุฏู ุนูุฏุชุงู ุชูุณุท ุจุฑูุงููโููุณุงู ุงูุฌุงู ูโุดูุฏ ฺฉู ุฏุฑ ุฒุจุงูโูุง ุขููุฒุด ุฏุฏูโุงูุฏ ฺฉู ุงูฺฉุงูุงุช ุชุจุฏู ููุน ุตุฑุญ ูุฏุงุฑูุฏุ ุจูุงุจุฑุงู ุจู "ุชููุจ" ูุชูุณู ูโุดููุฏ.

ุจุฑุง ูุซุงูุ ฺฉุฏ ุฒุฑ ฺฉ **int** ุฑุง ุจู ฺฉ **int**\* "ุชุจุฏู" ูโฺฉูุฏุ ุตุฑูุงู ุจุง ูุฑุถ ุงูฺฉู ุงุฒ ูุธุฑ ุจุชโุจูโุจุช ูุนุงุฏู ูุณุชูุฏ:

```cpp
union Fudge {
    int i;
    int* p;
};

int* cheat(int i)
{
    Fudge a;
    a.i = i;
    return a.p; // ุงุณุชูุงุฏูู ุจุฏ
}
```

ุงูุง ุงู ุฏุฑ ูุงูุน ูฺ **ุชุจุฏู** ุงูุฌุงู ููโุฏูุฏ. ุฏุฑ ุจุฑุฎ ูุงุดูโูุงุ ฺฉ **int** ู ฺฉ **int**\* ุงูุฏุงุฒูู ฺฉุณุงู ูุฏุงุฑูุฏุ ู ุฏุฑ ุจุฑุฎ ุฏฺฏุฑ ูฺ ุนุฏุฏ ุตุญุญ ููโุชูุงูุฏ ุขุฏุฑุณ ูุฑุฏ ุฏุงุดุชู ุจุงุดุฏ. ฺูู ุงุณุชูุงุฏูโุง ุงุฒ union **ุฎุทุฑูุงฺฉ ู ุบุฑูุงุจูโุงูุชูุงู (nonportable)** ุงุณุช.

ุงฺฏุฑ ูุงูุนุงู ุจู ฺูู ุชุจุฏู ุฐุงุชุงู ุฒุดุช ูุงุฒ ุฏุงุฑุฏุ ุงุฒ **ุนููฺฏุฑ ุชุจุฏู ููุน ุตุฑุญ** ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ุฎูุงููุฏู ูุชูุฌู ุดูุฏ ฺู ุงุชูุงู ุฏุฑ ุญุงู ุฑุฎ ุฏุงุฏู ุงุณุช:

```cpp
int* cheat2(int i)
{
    return reinterpret_cast<int*>(i); // ุจูโูุถูุญ ุฒุดุช ู ุฎุทุฑูุงฺฉ
}
```

ุงูุฌุง ุฏุณุชโฺฉู ฺฉุงููพุงูุฑ ุงู ุดุงูุณ ุฑุง ุฏุงุฑุฏ ฺฉู ุฏุฑ ุตูุฑุช ูุชูุงูุช ุจูุฏู ุงูุฏุงุฒูู ุงุดุงุก ุจู ุดูุง ูุดุฏุงุฑ ุจุฏูุฏ ู ุงู ฺฉุฏ ููุงููุฏ ฺฉ **ุงูฺฏุดุช ุฒุฎู ุขุดฺฉุงุฑ** ุฌููู ูโฺฉูุฏ.

---

ุงุณุชูุงุฏู ุงุฒ **union** ูโุชูุงูุฏ ุจุฑุง ูุดุฑุฏูโุณุงุฒ ุฏุงุฏูโูุง ู ุงุฒ ุงู ุทุฑู ุจุฑุง ุจูุจูุฏ ฺฉุงุฑุง **ุถุฑูุฑ** ุจุงุดุฏ.
ุจุง ุงู ุญุงูุ ุจุดุชุฑ ุจุฑูุงููโูุง ุงุฒ union ุณูุฏ ฺูุฏุงู ููโุจุฑูุฏ ู unionูุง ุจูโุทูุฑ ฺฉู **ูุณุชุนุฏ ุฎุทุง** ูุณุชูุฏ.

ุจู ููู ุฏููุ ูู unionูุง ุฑุง ฺฉ ูุงุจูุช **ุจุดโุงุฒุญุฏโุงุณุชูุงุฏูโุดุฏู** ูโุฏุงููุ ูุฑ ููุช ูโุชูุงูุฏุ ุงุฒ ุขูโูุง ุงุฌุชูุงุจ ฺฉูุฏ.

## Unions and Classes
ุจุณุงุฑ ุงุฒ unionูุง ุบุฑุณุงุฏูุ ุนุถู ุฏุงุฑูุฏ ฺฉู ุฎู ุจุฒุฑฺฏโุชุฑ ุงุฒ ุงุนุถุง ูพุฑุชฺฉุฑุงุฑุดุงู ุงุณุช. ฺูู ุงูุฏุงุฒูู ฺฉ union ุญุฏุงูู ุจู ุจุฒุฑฺฏู ุจุฒุฑฺฏโุชุฑู ุนุถู ุขู ุงุณุชุ ูุถุง ูุฏุฑ ูโุฑูุฏ. ุงู ูุฏุฑุฑูุช ุฑุง ุงุบูุจ ูโุชูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ูุฌููุนูโุง ุงุฒ ฺฉูุงุณโูุง ูุดุชูโุดุฏู (ยง3.2.2ุ ูุตู 20) ุจูโุฌุง union ุจุฑุทุฑู ฺฉุฑุฏ.
ุงุฒ ูุธุฑ ููุ ฺฉ union ฺฏูููโุง ุงุฒ struct (ยง8.2) ู struct ูู ฺฏูููโุง ุงุฒ class (ูุตู 16) ุงุณุช. ุจุงุงูโุญุงูุ ุจุณุงุฑ ุงุฒ ุงูฺฉุงูุงุช ฺฉู ุจุฑุง ฺฉูุงุณโูุง ูุฑุงูู ุดุฏู ุจุฑุง unionูุง ููุถูุนุช ูุฏุงุฑุฏุ ุจูุงุจุฑุงู ูุญุฏูุฏุชโูุง ุจุฑ unionูุง ุงุนูุงู ูโุดูุฏ:

\[1] ฺฉ union ููโุชูุงูุฏ ุชุงุจุน ูุฌุงุฒ ุฏุงุดุชู ุจุงุดุฏ.
\[2] ฺฉ union ููโุชูุงูุฏ ุนุถู ุงุฒ ููุน reference ุฏุงุดุชู ุจุงุดุฏ.
\[3] ฺฉ union ููโุชูุงูุฏ ฺฉูุงุณ ูพุงู ุฏุงุดุชู ุจุงุดุฏ.
\[4] ุงฺฏุฑ union ุนุถู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุณุงุฒูุฏูู ฺฉุงุฑุจุฑ-ุชุนุฑูโุดุฏูุ ุนููู ฺฉูพุ ุนููู ุฌุงุจูโุฌุงุ ุง ูุฎุฑุจ ุฏุงุฑุฏุ ุขู ุชุงุจุน ูฺู ุจุฑุง ุงู union ุญุฐู (deleted) ูโุดูุฏ (ยง3.3.4ุ ยง17.6.4)ุ ุนู ุจุฑุง ุดุก ุงุฒ ููุน ุขู union ูุงุจู ุงุณุชูุงุฏู ูุฎูุงูุฏ ุจูุฏ.
\[5] ุญุฏุงฺฉุซุฑ ฺฉ ุนุถู ุงุฒ ฺฉ union ูโุชูุงูุฏ ููุฏุงุฑุฏูู ุฏุฑููโฺฉูุงุณ (in-class initializer) ุฏุงุดุชู ุจุงุดุฏ (ยง17.4.4).
\[6] ฺฉ union ููโุชูุงูุฏ ุจูโุนููุงู ฺฉูุงุณ ูพุงู ุงุณุชูุงุฏู ุดูุฏ.

ุงู ูุญุฏูุฏุชโูุง ุงุฒ ุจุฑูุฒ ุจุณุงุฑ ุงุฒ ุฎุทุงูุง ุธุฑู ุฌููฺฏุฑ ูโฺฉููุฏ ู ูพุงุฏูโุณุงุฒู unionูุง ุฑุง ุณุงุฏูโุชุฑ ูโุณุงุฒูุฏ. ุฏูู ููู ุงุณุช ฺูู ุงุณุชูุงุฏู ุงุฒ unionูุง ุงุบูุจ ุจุง ูุฏู ุจูููโุณุงุฒ ุงุณุช ู ููโุฎูุงูู ยซูุฒููโูุง ูพููุงูยป ุชุญูู ุดูุฏ ู ุขู ุฑุง ูุฎุฏูุด ฺฉูุฏ.

ูุงุนุฏูโุง ฺฉู ุณุงุฒูุฏูโูุง (ู ุบุฑู) ุฑุง ุฏุฑ union ฺฉู ุนุถู ุจุง ุณุงุฒูุฏู (ู ุบุฑู) ุฏุงุฑุฏ ุญุฐู ูโฺฉูุฏุ unionูุง ุณุงุฏู ุฑุง ุณุงุฏู ูฺฏู ูโุฏุงุฑุฏ ู ุจุฑูุงููโููุณ ุฑุง ูุงุฏุงุฑ ูโฺฉูุฏ ุฏุฑ ุตูุฑุช ูุงุฒ ุนููุงุช ูพฺุฏู ุฑุง ุฎูุฏุด ูุฑุงูู ฺฉูุฏ. ุจุฑุง ูุซุงูุ ฺูู Entry ูฺ ุนุถู ุจุง ุณุงุฒูุฏูุ ูุฎุฑุจ ุง ุนููฺฏุฑูุง ุงูุชุณุงุจ ูุฏุงุฑุฏุ ูโุชูุงูู Entryูุง ุฑุง ุขุฒุงุฏุงูู ุจุณุงุฒู ู ฺฉูพ ฺฉูู. ูุซูุงู:

```cpp
void f(Entry a)
{
    Entry b = a;
};
```

ุงูุฌุงู ุงู ฺฉุงุฑ ุจุง ฺฉ union ูพฺุฏูโุชุฑ ุจู ุฏุดูุงุฑโูุง ูพุงุฏูโุณุงุฒ ุง ุฎุทุง ููุฌุฑ ูโุดูุฏ:

```cpp
union U {
    int m1;
    complex<double> m2;   // complex ุณุงุฒูุฏู ุฏุงุฑุฏ
    string m3;            // string ุณุงุฒูุฏู ุฏุงุฑุฏ (ฺฉ ูุงูุฑุฏุง ููู ุฑุง ูฺฏู ูโุฏุงุฑุฏ)
};
```

ุจุฑุง ฺฉูพ ฺฉุฑุฏู ฺฉ U ุจุงุฏ ุชุตูู ุจฺฏุฑู ฺฉุฏุงู ุนููุงุชู ฺฉูพ ุฑุง ุจูโฺฉุงุฑ ุจุจุฑู. ูุซูุงู:

```cpp
void f2(U x)
{
    U u;         // ุฎุทุง: ฺฉุฏุงู ุณุงุฒูุฏูู ูพุดโูุฑุถุ
    U u2 = x;    // ุฎุทุง: ฺฉุฏุงู ุณุงุฒูุฏูู ฺฉูพุ
    u.m1 = 1;    // ุงูุชุณุงุจ ุจู ุนุถู int
    string s = u.m3;  // ูุงุฌุนู: ุฎูุงูุฏู ุงุฒ ุนุถู string
    return;      // ุฎุทุง: ุจุฑุง xุ u ู u2 ฺฉุฏุงู ูุฎุฑุจโูุง ูุฑุงุฎูุงู ูโุดููุฏุ
}
```

ููุดุชู ุฏุฑ ฺฉ ุนุถู ู ุณูพุณ ุฎูุงูุฏู ุงุฒ ุนุถู ุฏฺฏุฑ ุบุฑูุงููู ุงุณุชุ ุงูุง ุงูุฑุงุฏ ุจุง ุงู ุญุงู (ูุนูููุงู ุงุฒ ุณุฑ ุงุดุชุจุงู) ุงู ฺฉุงุฑ ุฑุง ูโฺฉููุฏ. ุฏุฑ ุงู ููุฑุฏุ ุณุงุฒูุฏูู ฺฉูพู string ุจุง ุขุฑฺฏููุงู ูุงูุนุชุจุฑ ูุฑุงุฎูุงู ูโุดูุฏ. ุฎูุดุจุฎุชุงูู U ุงุตูุงู ฺฉุงููพุงู ููโุดูุฏ. ููุช ูุงุฒู ุจุงุดุฏุ ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ฺฉูุงุณ ุญุงู ฺฉ union ุชุนุฑู ฺฉูุฏ ฺฉู ุงุนุถุง union ุฏุงุฑุง ุณุงุฒูุฏูุ ูุฎุฑุจ ู ุงูุชุณุงุจ ุฑุง ุจูโุฏุฑุณุช ูุฏุฑุช ฺฉูุฏ (ยง8.3.2). ุฏุฑ ุตูุฑุช ุชูุงูุ ฺูู ฺฉูุงุณ ููฺูู ูโุชูุงูุฏ ุฌูู ุฎุทุง ููุดุชู ุฏุฑ ฺฉ ุนุถู ู ุฎูุงูุฏู ุงุฒ ุนุถู ุฏฺฏุฑ ุฑุง ุจฺฏุฑุฏ.

ุงูฺฉุงู ูุดุฎุต ฺฉุฑุฏู ฺฉ ููุฏุงุฑุฏูู ุฏุฑููโฺฉูุงุณ ุจุฑุง ุญุฏุงฺฉุซุฑ ฺฉ ุนุถู ูุฌูุฏ ุฏุงุฑุฏ. ุงฺฏุฑ ฺูู ุดูุฏุ ุงู ููุฏุงุฑุฏู ุจุฑุง ููุฏุงุฑุฏูู ูพุดโูุฑุถ ุจูโฺฉุงุฑ ูโุฑูุฏ. ูุซูุงู:

```cpp
union U2 {
    int a;
    const char* p {""};
};
```

```cpp
U2 x1;      // ุจูโุทูุฑ ูพุดโูุฑุถ ููุฏุงุฑุฏู ูโุดูุฏุ ุนู x1.p == ""
U2 x2 {7};  // x2.a == 7
```

## Anonymous unions
ุจุฑุง ุงูโฺฉู ุจุจูู ฺฺฏููู ูโุชูุงู ฺฉูุงุณ ููุดุช ฺฉู ูุดฺฉูุงุช ูุงุด ุงุฒ ุณูุกุงุณุชูุงุฏู ุงุฒ ฺฉ union ุฑุง ุจุฑุทุฑู ฺฉูุฏุ ฺฉ ฺฏูููู ุฏฺฏุฑ ุงุฒ Entry (ยง8.3) ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ:

```cpp
class Entry2 { // ุฏู ููุงุด ุฌุงฺฏุฒู ฺฉู ุจูโุตูุฑุช union ููุงุด ุฏุงุฏู ุดุฏูโุงูุฏ
private:
    enum class Tag { number, text };
    Tag type; // ุจุฑฺุณุจ (discriminant)
    union { // ููุงุด (representation)
        int i;
        string s; // string ุณุงุฒูุฏูู ูพุดโูุฑุถุ ุนููฺฏุฑูุง ฺฉูพ ู ูุฎุฑุจ ุฏุงุฑุฏ
    };
public:
    struct Bad_entry { }; // ุจุฑุง ูพุฑุชุงุจ ุงุณุชุซูุงูุง ุงุณุชูุงุฏู ูโุดูุฏ
    string name;
    ~Entry2();
    Entry2& operator=(const Entry2&); // ูุงุฒู ุงุณุช ฺูู ฺฉ ุงุฒ ุญุงูุชโูุง string ุงุณุช
    Entry2(const Entry2&);
    // ...
    int number() const;
    string text() const;
    void set_number(int n);
    void set_text(const string&);
    // ...
};
```

ูู ุทุฑูุฏุงุฑ ุชูุงุจุน get/set ูุณุชูุ ุงูุง ุฏุฑ ุงู ููุฑุฏ ูุงูุนุงู ูุงุฒู ุงุณุช ููฺฏุงู ูุฑ ุฏุณุชุฑุณ ุนููู ุบุฑุณุงุฏู ู ูุดุฎุตู ฺฉุงุฑุจุฑ ุงูุฌุงู ุฏูู. ูู ุงูุชุฎุงุจ ฺฉุฑุฏูโุงู ุชุงุจุน ยซุฎูุงูุฏูยป ุฑุง ุจู ูุงู ููุงู ููุฏุงุฑ ุจูุงูู ู ุจุฑุง ุชุงุจุน ยซููุดุชูยป ุงุฒ ูพุดููุฏ set\_ ุงุณุชูุงุฏู ฺฉูู. ุจู ุดููโูุง ูุงูโฺฏุฐุงุฑู ูุชุนุฏุฏุ ุงู ฺฉ ุชุฑุฌุญ ูู ุงุณุช.

ุชูุงุจุน ุฏุณุชุฑุณู ุฎูุงูุฏู ุฑุง ูโุชูุงู ุจู ุงู ุดฺฉู ุชุนุฑู ฺฉุฑุฏ:

```cpp
int Entry2::number() const
{
    if (type != Tag::number) throw Bad_entry{};
    return i;
}

string Entry2::text() const
{
    if (type != Tag::text) throw Bad_entry{};
    return s;
}
```

ุงู ุชูุงุจุน ุฏุณุชุฑุณุ ููุนู ุจุฑฺุณุจ ุฑุง ุจุฑุฑุณ ูโฺฉููุฏ ู ุงฺฏุฑ ููุงู ููุน ุจุงุดุฏ ฺฉู ุจุง ุฏุณุชุฑุณ ููุฑุฏู ูุธุฑ ูุง ุชุทุงุจู ุฏุงุฑุฏุ ููุฏุงุฑ ุฑุง ุจุฑูโฺฏุฑุฏุงููุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช ฺฉ ุงุณุชุซูุง ูพุฑุชุงุจ ูโฺฉููุฏ. ฺูู union ุฑุง ุงุบูุจ ยซtagged unionยป ุง ยซdiscriminated unionยป ูโูุงููุฏ.

ุชูุงุจุน ุฏุณุชุฑุณู ููุดุชู ุงุณุงุณุงู ููุงู ุจุฑุฑุณู ุจุฑฺุณุจ ููุน ุฑุง ุงูุฌุงู ูโุฏููุฏุ ุงูุง ุชูุฌู ฺฉูุฏ ฺฉู ุชูุธู ฺฉ ููุฏุงุฑ ุฌุฏุฏ ุจุงุฏ ููุฏุงุฑ ูุจู ุฑุง ูู ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ:

```cpp
void Entry2::set_number(int n)
{
    if (type == Tag::text) {
        s.~string();      // ูุงุจูุฏุณุงุฒู ุตุฑุญู string (ยง11.2.4)
        type = Tag::number;
    }
    i = n;
}

void Entry2::set_text(const string& ss)
{
    if (type == Tag::text)
        s = ss;
    else {
        new(&s) string{ss}; // placement new: ุณุงุฒุดู ุตุฑุญู string (ยง11.2.4)
        type = Tag::text;
    }
}
```

ุงุณุชูุงุฏู ุงุฒ ฺฉ union ูุง ุฑุง ูุงุฏุงุฑ ูโฺฉูุฏ ุจุฑุง ูุฏุฑุช ุฏูุฑูู ุนูุฑู ุนูุงุตุฑู union ุงุฒ ูุงุจูุชโูุง ุณุทุญ ูพุงู ู ูุณุจุชุงู ูุงูุฃููุณ ุฒุจุงู (ุณุงุฒุด/ูุงุจูุฏุณุงุฒู ุตุฑุญ) ุจูุฑู ุจฺฏุฑู. ุงู ุฎูุฏ ุฏูู ุฏฺฏุฑ ุงุณุช ุจุฑุง ุงุญุชุงุท ุฏุฑ ุงุณุชูุงุฏู ุงุฒ unionูุง.

ุชูุฌู ฺฉูุฏ union ุฏุฑ ุงุนูุงูู Entry2 ูุงูโฺฏุฐุงุฑ ูุดุฏู ุงุณุช. ุงู ุจุงุนุซ ูโุดูุฏ ฺฉ union ูุงุดูุงุณ (anonymous) ุจุงุดุฏ. ฺฉ union ูุงุดูุงุณ ยซุดุกยป ุงุณุชุ ูู ยซููุนยปุ ู ุงุนุถุง ุขู ุจุฏูู ุฐฺฉุฑ ูุงูู ุดุก ูุงุจู ุฏุณุชุฑุณโุงูุฏ. ุนู ูโุชูุงูู ุงุนุถุง ฺฉ union ูุงุดูุงุณ ุฑุง ุฏููุงู ูุงููุฏ ุณุงุฑ ุงุนุถุง ฺฉ ฺฉูุงุณ ุจู ฺฉุงุฑ ุจุจุฑูโุจู ุดุฑุท ฺฉู ุจู ุฎุงุทุฑ ุฏุงุดุชู ุจุงุดู ุงุนุถุง ฺฉ union ูุงูุนุงู ููุท ฺฉโฺฉ ู ุฏุฑ ฺฉ ุฒูุงู ูุงุจู ุงุณุชูุงุฏูโุงูุฏ.

Entry2 ุนุถู ุงุฒ ููุน ุฏุงุฑุฏ ฺฉู ุนููฺฏุฑ ุงูุชุณุงุจู ฺฉุงุฑุจุฑ-ุชุนุฑูโุดุฏู ุฏุงุฑุฏ (string)ุ ุจูุงุจุฑุงู ุนููฺฏุฑ ุงูุชุณุงุจู Entry2 ุญุฐู ูโุดูุฏ (ยง3.3.4ุ ยง17.6.4). ุงฺฏุฑ ุจุฎูุงูู Entry2ูุง ุฑุง ุจู ูู ุงูุชุณุงุจ ุฏููุ ุจุงุฏ

Entry2::operator=() ุฑุง ุชุนุฑู ฺฉูู. ุงูุชุณุงุจ ุชุฑฺฉุจ ุงุฒ ูพฺุฏฺฏโูุง ุฎูุงูุฏู ู ููุดุชู ุงุณุชุ ุงูุง ุงุฒ ูุธุฑ ููุทู ูุดุงุจู ุชูุงุจุน ุฏุณุชุฑุณ ุงุณุช:

```cpp
Entry2& Entry2::operator=(const Entry2& e) // ูุงุฒู ุงุณุช ฺูู ฺฉ ุงุฒ ุญุงูุชโูุง string ุงุณุช
{
    if (type == Tag::text && e.type == Tag::text) {
        s = e.s;           // ุงูุชุณุงุจ ูุนูููู string
        return *this;
    }
    if (type == Tag::text) s.~string(); // ูุงุจูุฏุณุงุฒู ุตุฑุญ (ยง11.2.4)

    switch (e.type) {
    case Tag::number:
        i = e.i;
        break;
    case Tag::text:
        new(&s) string(e.s); // placement new: ุณุงุฒุดู ุตุฑุญ (ยง11.2.4)
        type = e.type;
    }
    return *this;
}
```

ุณุงุฒูุฏูโูุง ู ฺฉ ุงูุชุณุงุจู ุงูุชูุงู (move assignment) ุฑุง ูุฒ ูโุชูุงู ุจูโุทูุฑ ูุดุงุจู ู ุฏุฑ ุตูุฑุช ูุงุฒ ุชุนุฑู ฺฉุฑุฏ. ุญุฏุงูู ุจู ฺฉ ุง ุฏู ุณุงุฒูุฏู ูุงุฒ ุฏุงุฑู ุชุง ุชุทุงุจู ุจู ุจุฑฺุณุจ ููุน ู ููุฏุงุฑ ุฑุง ุจุฑูุฑุงุฑ ฺฉูู. ูุฎุฑุจ ุจุงุฏ ุญุงูุชู string ุฑุง ุฑุณุฏฺฏ ฺฉูุฏ:

```cpp
Entry2::~Entry2()
{
    if (type == Tag::text) s.~string(); // ูุงุจูุฏุณุงุฒู ุตุฑุญ (ยง11.2.4)
}
```
## Enumerations
ฺฉ ุดูุงุฑุด (Enumeration) ููุน ุฏุงุฏู ุงุณุช ฺฉู ูโุชูุงูุฏ ูุฌููุนูโุง ุงุฒ ููุงุฏุฑ ุนุฏุฏ ุตุญุญ ุฑุง ฺฉู ุชูุณุท ฺฉุงุฑุจุฑ ูุดุฎุต ุดุฏูโุงูุฏุ ูฺฏู ุฏุงุฑุฏ (ยงiso.7.2).
ุจุฑุฎ ุงุฒ ููุงุฏุฑ ููฺฉูู ฺฉ ุดูุงุฑุดุ ูุงูโฺฏุฐุงุฑ ุดุฏูโุงูุฏ ู **enumerator** ูุงูุฏู ูโุดููุฏ.
ุจุฑุง ูุซุงู:

```cpp
enum class Color { red, green, blue };
```

ุงู ฺฉุฏ ฺฉ ุดูุงุฑุด ุจู ูุงู `Color` ุชุนุฑู ูโฺฉูุฏ ฺฉู ุดุงูู enumeratorูุง `red`ุ `green` ู `blue` ุงุณุช.
ุงุตุทูุงุญ ยซฺฉ enumerationยป ุจู ุทูุฑ ูุญุงูุฑูโุง ฺฉูุชุงู ุดุฏู ู ุจู ุดฺฉู ยซฺฉ enumยป ุงุณุชูุงุฏู ูโุดูุฏ.

ุฏู ููุน ุดูุงุฑุด ูุฌูุฏ ุฏุงุฑุฏ:

1. **enum class**โูุง: ฺฉู ุฏุฑ ุขู ูุงูโูุง enumeratorูุง (ูุงููุฏ `red`) ูุญุฏูุฏ ุจู ููุงู enum ูุณุชูุฏ ู ููุงุฏุฑุดุงู ุจู ุทูุฑ ุถูู ุจู ุงููุงุน ุฏฺฏุฑ ุชุจุฏู ููโุดููุฏ.
2. **enum ูุนููู (Plain enum):** ฺฉู ุฏุฑ ุขู ูุงูโูุง enumeratorูุง ุฏุฑ ููุงู ูุญุฏูุฏูโ ุชุนุฑูโุดุฏูโ enum ูุฑุงุฑ ุฏุงุฑูุฏ ู ููุงุฏุฑุดุงู ุจู ุทูุฑ ุถูู ุจู ุนุฏุฏ ุตุญุญ ุชุจุฏู ูโุดููุฏ.

ุจู ุทูุฑ ฺฉูุ **ุงุณุชูุงุฏู ุงุฒ enum class ุชูุตู ูโุดูุฏ** ฺูู ุจุงุนุซ ูโุดูุฏ ุฎุทุงูุง ู ุงุชูุงูุงุช ุบุฑููุชุธุฑู ฺฉูุชุฑ ุฑุฎ ุจุฏูุฏ.

ุขุง ูโุฎูุงู ุชูุงูุชโูุง ูู ุจู ุงู ุฏู ููุน enum ุฑุง ูู ุจุง ูุซุงู ุชูุถุญ ุจุฏููุ (ูุซูุงู ุชุจุฏู ููุน ู ูุญุฏูุฏูู ูุงูโูุง)

## enum classes
ฺฉ **enum class** ฺฉ ุดูุงุฑุด (enumeration) ุจุง **ูุญุฏูุฏู ูุดุฎุต (scoped)** ู **ููุน ูู (strongly typed)** ุงุณุช.
ุจุฑุง ูุซุงู:

```cpp
enum class Traffic_light { red, yellow, green };
enum class Warning { green, yellow, orange, red }; // ุณุทุญ ูุดุฏุงุฑ ุขุชุดโุณูุฒ
```

* `Warning a1 = 7;` โ ุฎุทุง: ุชุจุฏู ุฎูุฏฺฉุงุฑ ุงุฒ `int` ุจู `Warning` ูุฌุงุฒ ูุณุช.
* `int a2 = green;` โ ุฎุทุง: `green` ุฏุฑ ุงู ูุญุฏูุฏู ูุงูุฑุฆ ุงุณุช.
* `int a3 = Warning::green;` โ ุฎุทุง: ุชุจุฏู ุฎูุฏฺฉุงุฑ ุงุฒ `Warning` ุจู `int` ูุฌูุฏ ูุฏุงุฑุฏ.
* `Warning a4 = Warning::green;` โ ุฏุฑุณุช ุงุณุช.

ุชุงุจุน ุฒุฑ ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ:

```cpp
void f(Traffic_light x)
{
    if (x == 9) { /* ... */ } // ุฎุทุง: 9 ฺฉ ููุฏุงุฑ Traffic_light ูุณุช
    if (x == red) { /* ... */ } // ุฎุทุง: red ุฏุฑ ุงู ูุญุฏูุฏู ูุฌูุฏ ูุฏุงุฑุฏ
    if (x == Warning::red) { /* ... */ } // ุฎุทุง: x ุงุฒ ููุน Warning ูุณุช
    if (x == Traffic_light::red) { /* ... */ } // ุฏุฑุณุช
}
```

ุฏูุช ฺฉูุฏ ฺฉู ุงฺฏุฑ ฺฉ enumerator (ูุซู `red`) ุฏุฑ ุฏู enum ูุฎุชูู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ูุดฺฉู ุงุฌุงุฏ ููโุดูุฏ ฺูู ูุฑ ฺฉุฏุงู ุฏุฑ ูุญุฏูุฏูโ enum ุฎูุฏุด ูุฑุงุฑ ุฏุงุฑุฏ.

---

### ููุน ุฒุฑู (Underlying Type)

ฺฉ enumeration ุฏุฑ ูุงูุน ุชูุณุท ฺฉ ููุน ุนุฏุฏ ุตุญุญ ููุงุด ุฏุงุฏู ูโุดูุฏ ู ูุฑ enumerator ูุฒ ฺฉ ููุฏุงุฑ ุนุฏุฏ ุฏุงุฑุฏ.
ุจู ููุน ฺฉู ุจุฑุง ููุงุด enumeration ุงุณุชูุงุฏู ูโุดูุฏุ **ููุน ุฒุฑู** ุขู ูโฺฏูู.
ุงู ููุน ุจุงุฏ ฺฉ ุงุฒ ุงููุงุน ุตุญุญ ุนูุงูุชโุฏุงุฑ ุง ุจุฏูู ุนูุงูุช ุจุงุดุฏุ ููุน ูพุดโูุฑุถ `int` ุงุณุช.

ูโุชูุงูู ุขู ุฑุง ุจู ุตูุฑุช ุตุฑุญ ุชุนู ฺฉูู:

```cpp
enum class Warning : int { green, yellow, orange, red }; // sizeof(Warning) == sizeof(int)
```

ุงฺฏุฑ ุจุฎูุงูู ูุถุง ฺฉูุชุฑ ุงุดุบุงู ุดูุฏ:

```cpp
enum class Warning : char { green, yellow, orange, red }; // sizeof(Warning) == 1
```

---

### ููุงุฏุฑ ูพุดโูุฑุถ Enumeratorูุง

ุจู ุตูุฑุช ูพุดโูุฑุถุ ููุฏุงุฑ enumeratorูุง ุงุฒ ฐ ุดุฑูุน ุดุฏู ู ุจู ุชุฑุชุจ ุงูุฒูุฏู ูโุดููุฏ:

```cpp
static_cast<int>(Warning::green)  == 0
static_cast<int>(Warning::yellow) == 1
static_cast<int>(Warning::orange) == 2
static_cast<int>(Warning::red)    == 3
```

ุงุณุชูุงุฏู ุงุฒ ููุน `Warning` ุจู ุฌุง `int`ุ ูู ุจู ุจุฑูุงููโููุณ ู ูู ุจู ฺฉุงููพุงูุฑ ฺฉูฺฉ ูโฺฉูุฏ ฺฉู ูุฏู ูุชุบุฑ ูุดุฎุตโุชุฑ ุจุงุดุฏ.

ูุซูุงู:

```cpp
void f(Warning key)
{
    switch (key) {
        case Warning::green:
            // ...
            break;
        case Warning::orange:
            // ...
            break;
        case Warning::red:
            // ...
            break;
    }
}
```

ุงูุฌุง ฺฉ ุงูุณุงู ูุชูุฌู ูโุดูุฏ ฺฉู ุญุงูุช `yellow` ูุงุฏุฏู ฺฏุฑูุชู ุดุฏู ู ุญุช ุจุฑุฎ ฺฉุงููพุงูุฑูุง ูุดุฏุงุฑ ูโุฏููุฏ ฺฉู ููู ุญุงูุชโูุง ูพูุดุด ุฏุงุฏู ูุดุฏูโุงูุฏ.

---

### ููุฏุงุฑุฏู ุตุฑุญ Enumeratorูุง

Enumerator ูโุชูุงูุฏ ุจุง ฺฉ ุนุจุงุฑุช ุซุงุจุช ุงุฒ ููุน ุตุญุญ ููุฏุงุฑุฏู ุดูุฏ:

```cpp
enum class Printer_flags {
    acknowledge = 1,
    paper_empty = 2,
    busy = 4,
    out_of_black = 8,
    out_of_color = 16,
    // ...
};
```

ููุงุฏุฑ ุจู ฺฏูููโุง ุงูุชุฎุงุจ ุดุฏูโุงูุฏ ฺฉู ุจุชูุงู ุจุง ุนููฺฏุฑูุง ุจุช (`|` ู `&`) ุขูโูุง ุฑุง ุชุฑฺฉุจ ฺฉุฑุฏ.

---

### ุชุนุฑู ุนููฺฏุฑูุง ุจุฑุง Enum

ุงุฒ ุขูุฌุง ฺฉู enum ฺฉ ููุน ฺฉุงุฑุจุฑ-ุชุนุฑูโุดุฏู ุงุณุชุ ูโุชูุงู ุนููฺฏุฑูุง ุฑุง ุจุฑุง ุขู ุจุงุฒุชุนุฑู ฺฉุฑุฏ:

```cpp
constexpr Printer_flags operator|(Printer_flags a, Printer_flags b)
{
    return static_cast<Printer_flags>(static_cast<int>(a) | static_cast<int>(b));
}

constexpr Printer_flags operator&(Printer_flags a, Printer_flags b)
{
    return static_cast<Printer_flags>(static_cast<int>(a) & static_cast<int>(b));
}
```

ุชุจุฏูโูุง ุตุฑุญ ูุงุฒู ูุณุชูุฏ ฺูู enum class ุชุจุฏู ุถูู ุจู int ูุฏุงุฑุฏ.
ุจุง ุงู ุชุนุฑู ูโุชูุงู ููุดุช:

```cpp
void try_to_print(Printer_flags x)
{
    if (x & Printer_flags::acknowledge) {
        // ...
    }
    else if (x & Printer_flags::busy) {
        // ...
    }
    else if (x & (Printer_flags::out_of_black | Printer_flags::out_of_color)) {
        // ฺฉ ุงุฒ ุฑูฺฏโูุง ุชูุงู ุดุฏู ุงุณุช
        // ...
    }
}
```

ฺูู ุงู ุนููฺฏุฑูุง `constexpr` ุชุนุฑู ุดุฏูโุงูุฏุ ูโุชูุงููุฏ ุฏุฑ ุนุจุงุฑุงุช ุซุงุจุช ุงุณุชูุงุฏู ุดููุฏ:

```cpp
void g(Printer_flags x)
{
    switch (x) {
        case Printer_flags::acknowledge:
            // ...
            break;
        case Printer_flags::busy:
            // ...
            break;
        case Printer_flags::out_of_black:
            // ...
            break;
        case Printer_flags::out_of_color:
            // ...
            break;
        case Printer_flags::out_of_black & Printer_flags::out_of_color:
            // ูุฑ ุฏู ุฑูฺฏ ุชูุงู ุดุฏู ุงุณุช
            // ...
            break;
    }
}
```

---

### ุงุนูุงู ู ุชุนุฑู ุฌุฏุงฺฏุงูู Enum Class

ูโุชูุงู ฺฉ enum class ุฑุง ุงุจุชุฏุง ุงุนูุงู ฺฉุฑุฏ ู ุจุนุฏุงู ุชุนุฑู ฺฉุฑุฏ:

```cpp
enum class Color_code : char; // ุงุนูุงู
void foobar(Color_code* p);   // ุงุณุชูุงุฏู

enum class Color_code : char { // ุชุนุฑู
    red, yellow, green, blue
};
```

---

### ุชุจุฏู ุตุฑุญ ุงุฒ ููุน ุตุญุญ

ูโุชูุงู ฺฉ ููุฏุงุฑ ุนุฏุฏ ุฑุง ุจู ุตูุฑุช ุตุฑุญ ุจู ฺฉ enum class ุชุจุฏู ฺฉุฑุฏ:

```cpp
enum class Flag : char { x=1, y=2, z=4, e=8 };

Flag f0 {};                   // ููุฏุงุฑ ูพุดโูุฑุถ 0
Flag f1 = 5;                  // ุฎุทุง: 5 ุงุฒ ููุน Flag ูุณุช
Flag f2 = Flag{5};            // ุฎุทุง: ุชุจุฏู ุจุงุฑฺฉโฺฉููุฏู ูุฌุงุฒ ูุณุช
Flag f3 = static_cast<Flag>(5);   // ุชุจุฏู ุตุฑุญ (ูุฌุงุฒ)
Flag f4 = static_cast<Flag>(999); // ุฎุทุง: 999 ุฏุฑ ูุญุฏูุฏู char ูุณุช
```

ุจู ููู ุฏููุ ุชุจุฏู ุถูู ุงุฒ ุนุฏุฏ ุจู enum class ูุฌุงุฒ ูุณุชุ ฺูู ุงฺฉุซุฑ ุงุนุฏุงุฏ ูุนุชุจุฑ ูุณุชูุฏ.

---

### ุงุณุชุฎุฑุงุฌ ููุฏุงุฑ ุนุฏุฏ Enumerator

ุจุฑุง ฺฏุฑูุชู ููุฏุงุฑ ุนุฏุฏ ูโุชูุงู ุงุฒ `static_cast` ุงุณุชูุงุฏู ฺฉุฑุฏ:

```cpp
int i = static_cast<int>(Flag::y);   // i ุจุฑุงุจุฑ 2 ูโุดูุฏ
char c = static_cast<char>(Flag::e); // c ุจุฑุงุจุฑ 8 ูโุดูุฏ
```

ุงูุฏุงุฒู (`sizeof`) ฺฉ enum class ุจุฑุงุจุฑ ุงูุฏุงุฒู ููุน ุฒุฑู ุขู ุงุณุชุ ุงฺฏุฑ ููุน ุฒุฑู ูุดุฎุต ูุดุฏู ุจุงุดุฏุ ุจุฑุงุจุฑ `sizeof(int)` ุงุณุช.


ฺฉ **plain enum** ุชูุฑุจุงู ููุงู ฺุฒ ุงุณุช ฺฉู C++ ูุจู ุงุฒ ูุนุฑู **enum class** ุงุฑุงุฆู ูโุฏุงุฏุ ุจูุงุจุฑุงู ุขู ุฑุง ุฏุฑ ุจุณุงุฑ ุงุฒ ฺฉุฏูุง C ู ุณุจฺฉ C++98 ุฎูุงูุฏ ุฏุฏ.
Enumeratorูุง ฺฉ plain enum ูุณุชููุงู ุจู ูุถุง ูุงู (scope) ููุงู enum ูุงุฑุฏ ูโุดููุฏ ู ุจูโุทูุฑ ุถูู ุจู ููุน ุตุญุญ (integer type) ุชุจุฏู ูโุดููุฏ.

ูุซุงูโูุง ุฒุฑ ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ ฺฉู ููุท ฺฉูููโ ยซclassยป ุญุฐู ุดุฏู ุงุณุช:

```cpp
enum Traffic_light { red, yellow, green };
enum Warning { green, yellow, orange, red }; // ุณุทุญ ูุดุฏุงุฑ ุขุชุดโุณูุฒ
// ุฎุทุง: ุชุนุฑู ุชฺฉุฑุงุฑ yellow (ุจุง ููุฏุงุฑ ฺฉุณุงู)
// ุฎุทุง: ุชุนุฑู ุชฺฉุฑุงุฑ red (ุจุง ููุงุฏุฑ ูุชูุงูุช)

Warning a1 = 7;         // ุฎุทุง: ุชุจุฏู int ุจู Warning ูุฌุงุฒ ูุณุช
int a2 = green;         // ุฏุฑุณุช: green ุฏุฑ ูุญุฏูุฏู ูุงู ุงุณุช ู ุจู int ุชุจุฏู ูโุดูุฏ
int a3 = Warning::green;// ุฏุฑุณุช: ุชุจุฏู Warning ุจู int ูุฌุงุฒ ุงุณุช
Warning a4 = Warning::green; // ุฏุฑุณุช
```

ุชุงุจุน:

```cpp
void f(Traffic_light x)
{
    if (x == 9) { /* ... */ } // ุฏุฑุณุช (ูู 9 ฺฉ ููุฏุงุฑ ูุนุชุจุฑ ุจุฑุง Traffic_light ูุณุช)
    if (x == red) { /* ... */ } // ุฎุทุง: ุฏู ููุฏุงุฑ red ุฏุฑ ูุญุฏูุฏู ูุฌูุฏ ุฏุงุฑูุฏ
    if (x == Warning::red) { /* ... */ } // ุฏุฑุณุช (ูู ุนุฌุจ!)
    if (x == Traffic_light::red) { /* ... */ } // ุฏุฑุณุช
}
```

ุฏุฑ ุงู ูุซุงูุ ุฎูุดโุดุงูุณ ุจูุฏู ฺฉู ุชุนุฑู ุฏูุจุงุฑูโ `red` ุฏุฑ ุฏู plain enum ุจุงุนุซ ุดุฏ ฺฉุงููพุงูุฑ ุฎุทุง ุฏูุฏ ู ุงุฒ ุจุฑูุฒ ุจุงฺฏ ูพููุงู ุฌููฺฏุฑ ุดูุฏ.

ุญุงูุง ุชุตูุฑ ฺฉูุฏ ูโุฎูุงูู ูุงูโูุง ุฑุง ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุฏุงุฎู ุชุบุฑ ุฏูู:

```cpp
enum Traffic_light { tl_red, tl_yellow, tl_green };
enum Warning { green, yellow, orange, red };

void f(Traffic_light x)
{
    if (x == red) { /* ... */ }             // ุฏุฑุณุช (ูู ุงุญุชูุงูุงู ุจุงฺฏ ุงุณุช!)
    if (x == Warning::red) { /* ... */ }    // ุฏุฑุณุช (ูู ุงุญุชูุงูุงู ุจุงฺฏ ุงุณุช!)
    if (x == Traffic_light::red) { /* ... */ } // ุฎุทุง: red ุฏฺฏุฑ ุฌุฒู Traffic_light ูุณุช
}
```

ุฏุฑ ุงูุฌุง ฺฉุงููพุงูุฑ `x == red` ุฑุง ูโูพุฐุฑุฏุ ุฏุฑุญุงูโฺฉู ุชูุฑุจุงู ูุทุนุงู ุงุดุชุจุงู ุงุณุช.
ุชุฒุฑู ูุงูโูุง ุจู ูุญุฏูุฏูโ ุจุงูุงุชุฑ (scope) ููุงูโุทูุฑ ฺฉู plain enum ุงูุฌุงู ูโุฏูุฏุ ููุน **ุขููุฏฺฏ ูุถุง ูุงู** ุงุณุช ู ุฏุฑ ูพุฑูฺูโูุง ุจุฒุฑฺฏ ูโุชูุงูุฏ ูุดฺฉูโุณุงุฒ ุดูุฏ. (ุจุฑุฑุณ ุงู ุฏุฑ ูุตู ฑด ุงุฏุงูู ุฏุงุฑุฏ)

---

### ุชุนู ููุน ุฒุฑู ุฏุฑ plain enum

ููุงููุฏ enum classุ ูโุชูุงู ููุน ุฒุฑู ฺฉ plain enum ุฑุง ูุฒ ุชุนู ฺฉุฑุฏ ู ุญุช ุขู ุฑุง ุจุฏูู ุชุนุฑู ฺฉุงูู ุงุนูุงู ูููุฏ:

```cpp
enum Traffic_light : char { tl_red, tl_yellow, tl_green }; // ููุน ุฒุฑู char ุงุณุช
enum Color_code : char; // ููุท ุงุนูุงู
void foobar(Color_code* p); // ุงุณุชูุงุฏู
// ...
enum Color_code : char { red, yellow, green, blue }; // ุชุนุฑู
```

ุงูุง ุงฺฏุฑ ููุน ุฒุฑู ุฑุง ูุดุฎุต ูฺฉูุฏุ ููโุชูุงูุฏ enum ุฑุง ุจุฏูู ุชุนุฑู ฺฉุงูู ุงุนูุงู ฺฉูุฏ.
ุฏุฑ ุงู ุตูุฑุช ููุน ุฒุฑู ุจุง ุงูฺฏูุฑุชู ูุณุจุชุงู ูพฺุฏู ุชุนู ูโุดูุฏ:

* ุงฺฏุฑ ูููโ enumeratorูุง ุบุฑููู ุจุงุดูุฏุ ุจุงุฒูโ ููุงุฏุฑ `[0 : 2^k-1]` ุงุณุช ฺฉู ฺฉูฺฺฉโุชุฑู ุชูุงู ุฏู (`2^k`) ุงุณุช ฺฉู ุชูุงู ููุงุฏุฑ ุฑุง ูพูุดุด ุฏูุฏ.
* ุงฺฏุฑ ููุฏุงุฑ ููู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ุจุงุฒูโ ููุงุฏุฑ `[-2^k : 2^k-1]` ุงุณุช.

ุจู ุงู ุชุฑุชุจ ฺฉูฺฺฉโุชุฑู ููุฏ ุจุช ููฺฉู ุงูุชุฎุงุจ ูโุดูุฏ ฺฉู ุจุชูุงูุฏ ูููโ ููุงุฏุฑ ุฑุง ุจุง ููุงุด ุฏู ูฺฉูู (twoโs complement) ุฏุฑ ุฎูุฏ ุฌุง ุฏูุฏ.

ูุซุงู:

```cpp
enum E1 { dark, light };          // ุจุงุฒู 0:1
enum E2 { a = 3, b = 9 };         // ุจุงุฒู 0:15
enum E3 { min = -10, max = 1000000 }; // ุจุงุฒู -1048576:1048575
```

---

### ุชุจุฏู ุตุฑุญ ุงุฒ ุนุฏุฏ ุจู plain enum

ูุงุนุฏูโ ุชุจุฏู ุตุฑุญ ุงุฒ ุนุฏุฏ ุจู plain enum ููุงููุฏ enum class ุงุณุชุ ุจุง ุงู ุชูุงูุช ฺฉู ุงฺฏุฑ ููุน ุฒุฑู ูุดุฎุต ูุดุฏู ุจุงุดุฏุ ูุชุฌูโ ุชุจุฏู ููุท ููุช ุชุนุฑูโุดุฏู ุงุณุช ฺฉู ููุฏุงุฑ ุฏุฑ ุจุงุฒูโ ูุนุชุจุฑ enum ุจุงุดุฏ:

```cpp
enum Flag { x=1, y=2, z=4, e=8 }; // ุจุงุฒู 0:15
Flag f0 {};                      // ููุฏุงุฑ ูพุดโูุฑุถ 0
Flag f1 = 5;                     // ุฎุทุง: 5 ุงุฒ ููุน Flag ูุณุช
Flag f2 = Flag{5};               // ุฎุทุง: ุชุจุฏู ูุณุชูู ูุฌุงุฒ ูุณุช
Flag f3 = static_cast<Flag>(5);  // ุฏุฑุณุช: 5 ุฏุฑ ุจุงุฒูโ ูุนุชุจุฑ ุงุณุช
Flag f4 = static_cast<Flag>(z|e);// ุฏุฑุณุช: 12 ุฏุฑ ุจุงุฒูโ ูุนุชุจุฑ ุงุณุช
Flag f5 = static_cast<Flag>(99); // ุชุนุฑูโูุดุฏู: 99 ุฎุงุฑุฌ ุงุฒ ุจุงุฒูโ ูุนุชุจุฑ ุงุณุช
```

ุจู ุฏูู ุชุจุฏู ุถูู ุงุฒ plain enum ุจู ููุน ุฒุฑูุ ูุงุฒู ูุณุช ุนููฺฏุฑ `|` ุฑุง ุชุนุฑู ฺฉููุ
`z` ู `e` ุฎูุฏุจูโุฎูุฏ ุจู int ุชุจุฏู ูโุดููุฏ ู `z|e` ูุญุงุณุจู ูโุดูุฏ.

---

### ุงูุฏุงุฒูโ plain enum

`sizeof` ฺฉ enumeration ุจุฑุงุจุฑ ุงูุฏุงุฒูโ ููุน ุฒุฑู ุขู ุงุณุช.
ุงฺฏุฑ ููุน ุฒุฑู ูุดุฎุต ูุดุฏู ุจุงุดุฏุ ฺฉุงููพุงูุฑ ฺฉูฺฺฉโุชุฑู ููุน ุตุญุญ ุฑุง ุงูุชุฎุงุจ ูโฺฉูุฏ ฺฉู ุชูุงู ููุงุฏุฑ ุฑุง ูฺฏู ุฏุงุฑุฏ ู ุจุฒุฑฺฏโุชุฑ ุงุฒ `sizeof(int)` ูุจุงุดุฏุ ูฺฏุฑ ุงูฺฉู ููุฏุงุฑูุง ุฏุฑ `int` ุง `unsigned int` ุฌุง ูุดููุฏ.
ูุซูุงู ุฑู ูุงุดู ฺฉู `sizeof(int)==4` ุงุณุชุ ุงูุฏุงุฒูโ E1 ูโุชูุงูุฏ ฑ ุง ด ุจุงุดุฏุ ูู ธ ููโุชูุงูุฏ ุจุงุดุฏ.

## Unnamed enums
ฺฉ **plain enum** ูโุชูุงูุฏ **ุจโูุงู** ุจุงุดุฏ.
ุจุฑุง ูุซุงู:

```cpp
enum { arrow_up = 1, arrow_down, arrow_sideways };
```

ุงุฒ ุงู ุญุงูุช ุฒูุงู ุงุณุชูุงุฏู ูโฺฉูู ฺฉู ุชููุง ุจู ฺฉ ูุฌููุนู **ุซุงุจุช ุนุฏุฏ** ูุงุฒ ุฏุงุฑูุ
ูู ฺฉ ููุน ุฏุงุฏูโุง ฺฉู ุจุฎูุงูู ุจุฑุง ูุชุบุฑูุง ุจู ฺฉุงุฑ ุจุจุฑู.
